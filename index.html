<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantitative Aptitude Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }
        .formula {
            font-family: 'Georgia', 'Times New Roman', serif;
            background-color: #f1f5f9;
            color: #0f766e;
            padding: 8px 12px;
            border-radius: 6px;
            margin: 8px 0;
            display: inline-block;
            border: 1px solid #e2e8f0;
            font-size: 1.05em;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            line-height: 1.6; 
        }
        .example-problem {
            @apply mt-3 mb-1 p-3 bg-sky-50 border border-sky-200 rounded-md text-sm;
        }
        .example-solution {
            @apply p-3 bg-green-50 border border-green-200 rounded-md text-sm text-slate-700;
        }
        .example-problem strong, .example-solution strong {
            @apply font-semibold text-sky-700;
        }
        .example-solution strong {
            @apply text-green-700;
        }

        .content-section { 
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .content-section.active { display: block; }
        
        .calculator-container, .ai-container {
            @apply mt-12 mb-10 p-8 rounded-lg shadow-md transition-all duration-300 ease-in-out;
            background: var(--card-bg, #ffffff);
            border: 1px solid var(--card-border, #e0e0e0);
            box-shadow: var(--card-shadow, rgba(0, 0, 0, 0.08) 0px 4px 12px);
        }
        .calculator-container:hover, .ai-container:hover {
            box-shadow: var(--card-shadow-hover, rgba(0, 0, 0, 0.15) 0px 6px 16px);
            transform: translateY(-3px);
        }
        .calculator-title, .ai-title {
            @apply text-2xl font-bold mb-6 flex items-center gap-4 pb-4 border-b;
        }
       
        .calculator-title i, .ai-title i {
            @apply text-2xl opacity-90;
        }
        
        .calculator-input-group {
            @apply space-y-8;
        }
        .calculator-input-wrapper {
            @apply relative;
        }
        .calculator-input {
            @apply mt-1 block w-full px-4 py-3 bg-slate-50 border border-slate-300 rounded-lg text-sm shadow-inner placeholder-slate-400 focus:outline-none focus:border-teal-500 focus:ring-2 focus:ring-teal-500/20 transition-all duration-200;
        }
        .calculator-input:focus {
            @apply transform scale-[1.01];
        }
        .calculator-input-label {
            @apply block text-sm font-medium text-slate-700 mb-1 flex items-center gap-2;
        }
        .calculator-input-label i {
            @apply text-teal-500 text-sm;
        }
        .calculator-button, .ai-button {
            @apply mt-6 px-8 py-3 text-white text-base font-semibold rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 w-full sm:w-auto transform hover:-translate-y-0.5 hover:scale-105 hover:shadow-lg;
        }
        
        .calculator-result-area {
            @apply mt-6 p-6 rounded-xl border text-sm min-h-[60px] shadow-inner;
        }
        
        .calculator-grid {
             @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;
         }
        .calculator-section {
            @apply space-y-6;
        }
        .calculator-description {
            @apply text-slate-600 text-sm mb-4;
        }
        .calculator-formula {
            @apply bg-teal-50 border border-teal-200 rounded-lg p-4 mb-6 text-sm text-teal-800 font-mono;
        }
        .calculator-example {
            @apply bg-slate-50 border border-slate-200 rounded-lg p-4 mb-6 text-sm text-slate-700;
        }
        .calculator-example-title {
            @apply font-semibold text-slate-800 mb-2;
        }
        
        .topic-heading {
            @apply text-3xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-300 flex items-center gap-3;
        }
        .sub-heading {
            @apply text-xl font-semibold text-teal-700 mt-6 mb-2 flex items-center gap-2;
        }
         .sub-heading-2 { /* For a slightly smaller sub-heading */
            @apply text-lg font-semibold text-teal-600 mt-5 mb-1 flex items-center gap-2;
        }
        .text-content {
            @apply text-slate-700 leading-relaxed;
        }
        .list-custom {
            @apply list-disc list-inside text-slate-600 space-y-2 pl-4;
        }
        .list-custom li > ul { /* Nested list styling */
            @apply list-circle list-inside pl-6 mt-1;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0d9488;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .ai-response-area {
            @apply mt-4 p-4 bg-slate-50 rounded-md border border-slate-200 text-sm min-h-[60px] shadow-inner;
        }
        .ai-response-area h3 {
            @apply font-semibold text-slate-700 mt-3 mb-1 text-base;
        }
        .ai-response-area ul {
            @apply list-disc list-inside pl-4 text-slate-600;
        }

        #sidebar {
            transition: all 0.3s ease-in-out;
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            box-shadow: 4px 0 10px rgba(0,0,0,0.1);
        }
        #sidebar nav a {
            color: #cbd5e1;
            @apply block px-4 py-3 text-sm rounded-lg transition-all duration-200 ease-in-out flex items-center gap-3;
        }
        #sidebar nav a:hover {
            background-color: rgba(255,255,255,0.1);
            color: #f1f5f9;
            transform: translateX(5px);
        }
        #sidebar nav a.active-topic {
            background-color: #0d9488;
            color: white;
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #sidebar nav a i {
            width: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            #sidebar {
                transform: translateX(-100%);
                position: fixed;
                z-index: 40;
                height: 100vh;
                overflow-y: auto;
            }
            #sidebar.open {
                transform: translateX(0);
            }
            #contentArea {
                margin-left: 0;
            }
            #menuButtonContainer {
                display: block;
            }
        }
        @media (min-width: 769px) {
            #menuButtonContainer {
                display: none;
            }
        }

        .welcome-section {
            @apply bg-gradient-to-br from-teal-50 to-emerald-50 p-8 rounded-xl shadow-lg border border-teal-100;
        }
        .welcome-section h2 {
            @apply text-3xl font-bold text-teal-800 mb-4;
        }
        .welcome-section p {
            @apply text-slate-700 leading-relaxed;
        }
        .feature-grid {
            @apply grid grid-cols-1 md:grid-cols-2 gap-4 mt-6;
        }
        .feature-item {
            @apply bg-white p-4 rounded-lg shadow-sm border border-slate-200 flex items-start gap-3;
        }
        .feature-item i {
            @apply text-teal-600 text-xl mt-1;
        }

        .calculator-theme-teal {
            --card-bg: linear-gradient(to bottom right, #f0f9ff 0%, #e0f2fe 100%);
            --card-border: #bfdbfe;
            --card-shadow: rgba(147, 197, 253, 0.3) 0px 7px 29px 0px;
            --card-shadow-hover: rgba(147, 197, 253, 0.5) 0px 10px 40px 0px;
            --title-color: #1d4ed8;
            --title-border-color: #dbeafe;
            --icon-color: #3b82f6;
            --button-from: #0e7490;
            --button-to: #155e75;
            --result-bg: #e0f2fe;
            --result-border: #bfdbfe;
            --result-text: #1d4ed8;
            --error-result-bg: #fee2e2;
            --error-result-border: #fecaca;
            --error-result-text: #dc2626;
        }

         .calculator-theme-slate {
            --card-bg: linear-gradient(to bottom right, #f8fafc 0%, #f1f5f9 100%);
            --card-border: #e2e8f0;
            --card-shadow: rgba(71, 85, 105, 0.2) 0px 7px 29px 0px;
            --card-shadow-hover: rgba(71, 85, 105, 0.4) 0px 10px 40px 0px;
            --title-color: #334155;
            --title-border-color: #f1f5f9;
            --icon-color: #64748b;
            --button-from: #475569;
            --button-to: #334155;
            --result-bg: #f1f5f9;
            --result-border: #e2e8f0;
            --result-text: #334155;
            --error-result-bg: #fee2e2;
            --error-result-border: #fecaca;
            --error-result-text: #dc2626;
         }

         .calculator-theme-emerald { /* For AI Assistant */
            --card-bg: linear-gradient(to bottom right, #ecfdf5 0%, #d1fae5 100%);
            --card-border: #a7f3d0;
            --card-shadow: rgba(16, 185, 129, 0.2) 0px 7px 29px 0px;
            --card-shadow-hover: rgba(16, 185, 129, 0.4) 0px 10px 40px 0px;
            --title-color: #047857; 
            --title-border-color: #d1fae5; 
            --icon-color: #059669; 
            --button-from: #059669; 
            --button-to: #047857; 
            --result-bg: #d1fae5;
            --result-border: #a7f3d0;
            --result-text: #047857;
            --error-result-bg: #fee2e2;
            --error-result-border: #fecaca;
            --error-result-text: #dc2626;
         }

        .calculator-container .calculator-title, .ai-container .ai-title {
             color: var(--title-color);
             border-color: var(--title-border-color);
         }
        .calculator-container .calculator-title i, .ai-container .ai-title i {
            color: var(--icon-color);
        }
        .calculator-container .calculator-button, .ai-container .ai-button {
            background: linear-gradient(to right, var(--button-from), var(--button-to));
        }

        .calculator-result-area {
            background: var(--result-bg);
            border-color: var(--result-border);
            color: var(--result-text);
        }
        .calculator-result-area.error {
            background: var(--error-result-bg);
            border-color: var(--error-result-border);
            color: var(--error-result-text);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-teal-50 text-slate-800">
    <div class="flex h-screen">
        <div id="menuButtonContainer" class="fixed top-0 left-0 p-4 z-50 md:hidden">
            <button id="menuButton" class="p-2 bg-teal-600 text-white rounded-md shadow-lg hover:bg-teal-700 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </button>
        </div>

        <aside id="sidebar" class="w-80 p-6 space-y-4 overflow-y-auto shadow-xl md:translate-x-0">
            <h1 class="text-2xl font-bold text-white mb-8 px-2 flex items-center gap-2">
                <i class="fas fa-calculator text-teal-400"></i>
                Quant Guide
            </h1>
            <nav>
                <ul id="topicList" class="space-y-2">
                </ul>
            </nav>
        </aside>

        <main id="contentArea" class="flex-1 p-6 md:p-8 lg:p-10 overflow-y-auto">
            <div id="topicContent" class="max-w-5xl mx-auto bg-white p-6 sm:p-8 rounded-xl shadow-xl"> 
                <div id="default-content" class="content-section active">
                    <div class="welcome-section">
                        <h2 class="flex items-center gap-3">
                            <i class="fas fa-star text-yellow-400"></i>
                            Welcome to Quantitative Aptitude Guide!
                        </h2>
                        <p class="text-content mt-2">
                            This interactive guide offers a comprehensive, book-like overview of key concepts, essential formulas, and calculation shortcuts for Quantitative Aptitude.
                            Navigate through topics using the menu on the left. Explore detailed definitions, an extensive list of formulas, practical solved examples, and try out interactive calculators to solidify your understanding.
                        </p>
                        <div class="feature-grid">
                            <div class="feature-item">
                                <i class="fas fa-calculator"></i>
                                <div>
                                    <h3 class="font-semibold text-slate-800">Interactive Calculators</h3>
                                    <p class="text-sm text-slate-600">Try out various calculators for different concepts</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-book-open"></i>
                                <div>
                                    <h3 class="font-semibold text-slate-800">Comprehensive Coverage</h3>
                                    <p class="text-sm text-slate-600">24 key topics with detailed explanations and examples</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-mobile-alt"></i>
                                <div>
                                    <h3 class="font-semibold text-slate-800">Mobile Friendly</h3>
                                    <p class="text-sm text-slate-600">Access on any device with responsive design</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-robot"></i>
                                <div>
                                    <h3 class="font-semibold text-slate-800">AI Assistant</h3>
                                    <p class="text-sm text-slate-600">Get help with word problems using AI</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="topic-1" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-stream text-teal-600"></i>1. Simplification and Approximation</h2>
                    <p class="text-content mb-4">Simplification is the process of reducing complex mathematical expressions to their simplest form by applying arithmetic operations according to a defined order. Approximation involves finding a value that is acceptably close to the exact value, often used to speed up calculations when precision to the last decimal isn't critical or when dealing with complex numbers.</p>
                    
                    <h3 class="sub-heading"><i class="fas fa-list-ol text-teal-500"></i>Key Concept: BODMAS Rule</h3>
                    <p class="text-content">BODMAS (or PEMDAS in some regions) dictates the sequence of operations: Brackets (Parentheses), Orders (Exponents/Powers, Roots), Division, Multiplication, Addition, Subtraction. Division and Multiplication have equal precedence and are performed left-to-right. Similarly, Addition and Subtraction have equal precedence and are performed left-to-right.</p>
                    <div class="example-problem">
                        <strong>Example:</strong> Simplify 36 - 2(20 + 12 &divide; 4 &times; 3 - 2 &times; 2) + 10
                    </div>
                    <div class="example-solution">
                        <strong>Solution:</strong><br>
                        Step 1 (Innermost Bracket - Division): 12 &divide; 4 = 3<br>
                        Expression becomes: 36 - 2(20 + 3 &times; 3 - 2 &times; 2) + 10<br>
                        Step 2 (Innermost Bracket - Multiplication L to R): 3 &times; 3 = 9; 2 &times; 2 = 4<br>
                        Expression becomes: 36 - 2(20 + 9 - 4) + 10<br>
                        Step 3 (Innermost Bracket - Addition/Subtraction L to R): 20 + 9 = 29; 29 - 4 = 25<br>
                        Expression becomes: 36 - 2(25) + 10<br>
                        Step 4 (Multiplication): 2 &times; 25 = 50<br>
                        Expression becomes: 36 - 50 + 10<br>
                        Step 5 (Subtraction/Addition L to R): 36 - 50 = -14; -14 + 10 = -4<br>
                        Answer: <span class="formula">-4</span>
                    </div>

                    <h3 class="sub-heading"><i class="fas fa-bullseye text-teal-500"></i>Approximation Techniques</h3>
                    <ul class="list-custom">
                        <li><strong>Rounding:</strong> Convert numbers to their nearest whole numbers or convenient figures. E.g., 47.89 &approx; 48; 102.13 &approx; 100.</li>
                        <li><strong>Percentage Approximation:</strong> Approximate percentages to easier fractions. E.g., 24.5% &approx; 25% = 1/4.</li>
                        <li><strong>Strategic Grouping:</strong> Group numbers that simplify easily together.</li>
                    </ul>
                     <div class="example-problem">
                        <strong>Example:</strong> Approximate the value of (4433.764 - 2211.993 - 1133.667 + 3377.442) &divide; 76.3 &times; 11.01
                    </div>
                    <div class="example-solution">
                        <strong>Solution:</strong><br>
                        Approximate values: (4434 - 2212 - 1134 + 3377) &divide; 76 &times; 11<br>
                        Bracket calculation: (4434 + 3377) - (2212 + 1134) = 7811 - 3346 = 4465<br>
                        Expression becomes: 4465 &divide; 76 &times; 11<br>
                        4465 &divide; 76 &approx; 58.75 (Can approximate 4480 &divide; 76 &approx; 4480 &divide; 80 &times; (80/76) &approx; 56 &times; 1.05 &approx; 58.8 or directly divide for better accuracy if time permits) <br>
                        Let's use a slightly more accurate 4465 / 76 &approx; 58.75.<br>
                        58.75 &times; 11 &approx; 59 &times; 11 = 649. (Or 58.75 &times; 10 + 58.75 = 587.5 + 58.75 = 646.25)<br>
                        Answer: Approximately <span class="formula">646</span> to <span class="formula">649</span> (depending on rounding precision).
                    </div>

                    <h3 class="sub-heading"><i class="fas fa-lightbulb text-teal-500"></i>Simplification Tricks</h3>
                    <ul class="list-custom">
                        <li><strong>Unit Digit Method:</strong> Useful for checking options in MCQs. The unit digit of a calculation is determined by the unit digits of the numbers involved.</li>
                        <li><strong>Digit Sum Method (Casting out Nines):</strong> The sum of the digits of a number (modulo 9) can be used to verify calculations.</li>
                        <li><strong>Vedic Maths & Shortcuts:</strong> Includes techniques for fast multiplication, squaring, cubing, division, etc. (e.g., base multiplication, Nikhilam sutra).</li>
                        <li><strong>Fraction-Percentage Conversions:</strong> Memorizing common conversions (e.g., 1/2=50%, 1/3=33.33%, 1/4=25%, 1/8=12.5%) saves significant time.</li>
                    </ul>
                </div>

                <div id="topic-2" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-sort-numeric-up text-teal-600"></i>2. Number Series</h2>
                    <p class="text-content mb-4">Number series questions test your ability to identify the underlying logical pattern in a given sequence of numbers. You might be asked to find a missing term, the next term, or an incorrect term in the series.</p>
                    
                    <h3 class="sub-heading"><i class="fas fa-project-diagram text-teal-500"></i>Arithmetic Progression (AP):</h3>
                    <p class="text-content">A sequence where the difference between any two consecutive terms is constant. This constant difference is called the common difference (d).</p>
                     <ul class="list-custom">
                        <li>n<sup>th</sup> term: <span class="formula">a<sub>n</sub> = a + (n-1)d</span> (where 'a' is the first term, 'd' is common difference)</li>
                        <li>Sum of first n terms (Series): <span class="formula">S<sub>n</sub> = n/2 [2a + (n-1)d]</span> or <span class="formula">S<sub>n</sub> = n/2 [a + l]</span> (where 'l' is the last term, l = a<sub>n</sub>)</li>
                    </ul>
                    <div class="example-problem">
                        <strong>Example AP:</strong> Find the 10<sup>th</sup> term and sum of the first 10 terms of the series 3, 7, 11, 15, ...
                    </div>
                    <div class="example-solution">
                        <strong>Solution:</strong><br>
                        Here, a = 3, d = 7 - 3 = 4, n = 10.<br>
                        10<sup>th</sup> term (a<sub>10</sub>) = a + (10-1)d = 3 + 9 &times; 4 = 3 + 36 = <span class="formula">39</span>.<br>
                        Sum of first 10 terms (S<sub>10</sub>) = 10/2 [2a + (10-1)d] = 5 [2&times;3 + 9&times;4] = 5 [6 + 36] = 5 &times; 42 = <span class="formula">210</span>.
                    </div>

                    <h3 class="sub-heading mt-4"><i class="fas fa-project-diagram text-teal-500"></i>Geometric Progression (GP):</h3>
                    <p class="text-content">A sequence where the ratio of any term to its preceding term is constant. This constant ratio is called the common ratio (r).</p>
                     <ul class="list-custom">
                        <li>n<sup>th</sup> term: <span class="formula">a<sub>n</sub> = ar<sup>n-1</sup></span> (where 'a' is the first term, 'r' is common ratio)</li>
                        <li>Sum of first n terms (Series): <span class="formula">S<sub>n</sub> = a(r<sup>n</sup>-1)/(r-1)</span> for r &gt; 1, or <span class="formula">S<sub>n</sub> = a(1-r<sup>n</sup>)/(1-r)</span> for r &lt; 1. (If r=1, S<sub>n</sub> = na)</li>
                        <li>Sum of infinite GP (if |r|&lt;1): <span class="formula">S<sub>&infin;</sub> = a/(1-r)</span></li>
                    </ul>
                     <div class="example-problem">
                        <strong>Example GP:</strong> Find the 5<sup>th</sup> term and sum of the first 5 terms of the series 2, 6, 18, ...
                    </div>
                    <div class="example-solution">
                        <strong>Solution:</strong><br>
                        Here, a = 2, r = 6/2 = 3, n = 5.<br>
                        5<sup>th</sup> term (a<sub>5</sub>) = ar<sup>5-1</sup> = 2 &times; 3<sup>4</sup> = 2 &times; 81 = <span class="formula">162</span>.<br>
                        Sum of first 5 terms (S<sub>5</sub>) = a(r<sup>n</sup>-1)/(r-1) = 2(3<sup>5</sup>-1)/(3-1) = 2(243-1)/2 = 242/1 = <span class="formula">242</span>.
                    </div>

                    <h3 class="sub-heading mt-4"><i class="fas fa-puzzle-piece text-teal-500"></i>Other Common Patterns:</h3>
                    <ul class="list-custom">
                        <li><strong>Squares/Cubes Series:</strong> Terms are squares or cubes of natural numbers, or follow a pattern involving squares/cubes (e.g., n<sup>2</sup>+1, n<sup>3</sup>-n). Example: 1, 4, 9, 16, 25 (n<sup>2</sup>).</li>
                        <li><strong>Difference/Double Difference Series:</strong> The differences between consecutive terms form an AP or GP. If the first differences don't show a clear pattern, find the differences of these differences (double difference).</li>
                        <li><strong>Mixed Series:</strong> A combination of two or more different types of series or operations. Example: T<sub>n</sub> = T<sub>n-1</sub> &times; k + c.</li>
                        <li><strong>Alternating Series:</strong> Two independent series interwoven, or alternating operations.</li>
                        <li><strong>Prime Number Series:</strong> Series consisting of prime numbers or based on operations on prime numbers.</li>
                        <li><strong>Fibonacci-like Series:</strong> Each term is the sum of the two preceding terms (or some variation).</li>
                    </ul>
                </div>
                
                <div id="topic-3" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-square-root-alt text-teal-600"></i>3. Quadratic Equation</h2>
                    <p class="text-content mb-4">This section deals with equations of the form ax<sup>2</sup> + bx + c = 0 and methods to find their roots.</p>
                    <p class="text-content">Standard Form: <span class="formula">ax<sup>2</sup> + bx + c = 0</span> (where a &ne; 0)</p>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Roots Formula (Quadratic Formula):</h3>
                    <p class="text-content"><span class="formula">x = [-b &plusmn; &radic;(b<sup>2</sup> - 4ac)] / 2a</span></p>
                    <h3 class="sub-heading"><i class="fas fa-plus-minus text-teal-500"></i>Sum and Product of Roots (&alpha;, &beta;):</h3>
                    <p class="text-content">Sum (&alpha; + &beta;): <span class="formula">-b/a</span></p>
                    <p class="text-content">Product (&alpha;&beta;): <span class="formula">c/a</span></p>
                    <h3 class="sub-heading"><i class="fas fa-equals text-teal-500"></i>Forming Equation from Roots:</h3>
                    <p class="text-content"><span class="formula">x<sup>2</sup> - (Sum of roots)x + (Product of roots) = 0</span></p>
                    <h3 class="sub-heading"><i class="fas fa-balance-scale text-teal-500"></i>Nature of Roots (Discriminant D = b<sup>2</sup> - 4ac):</h3>
                    <ul class="list-custom">
                        <li>D > 0 & is a perfect square: Real, distinct, rational roots.</li>
                        <li>D > 0 & not a perfect square: Real, distinct, irrational roots.</li>
                        <li>D = 0: Real, equal, rational roots.</li>
                        <li>D < 0: Imaginary roots.</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-chart-area text-teal-500"></i>Maxima/Minima:</h3>
                    <p class="text-content">The vertex of the parabola y = ax<sup>2</sup> + bx + c occurs at <span class="formula">x = -b/2a</span>. This point represents a minimum if a > 0 and a maximum if a < 0.</p>
                    <div class="calculator-container calculator-theme-teal">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Quadratic Equation Solver
                        </h4>
                        <div class="calculator-description">
                            Enter the coefficients of your quadratic equation in the form ax² + bx + c = 0
                        </div>
                        <div class="calculator-formula">
                            ax² + bx + c = 0
                        </div>
                        <div class="calculator-section">
                            <div class="calculator-grid">
                                <div class="calculator-input-wrapper">
                                    <label for="coeffA" class="calculator-input-label">
                                        <i class="fas fa-square"></i>
                                        Coefficient a
                                    </label>
                                    <input type="number" id="coeffA" class="calculator-input" placeholder="Enter coefficient a">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="coeffB" class="calculator-input-label">
                                        <i class="fas fa-times"></i>
                                        Coefficient b
                                    </label>
                                    <input type="number" id="coeffB" class="calculator-input" placeholder="Enter coefficient b">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="coeffC" class="calculator-input-label">
                                        <i class="fas fa-plus"></i>
                                        Coefficient c
                                    </label>
                                    <input type="number" id="coeffC" class="calculator-input" placeholder="Enter coefficient c">
                                </div>
                            </div>
                            <button id="solveQuadratic" class="calculator-button">
                                <i class="fas fa-equals mr-2"></i>
                                Solve Equation
                            </button>
                            <div id="quadraticResult" class="calculator-result-area"></div>
                        </div>
                    </div>
                </div>

                <div id="topic-4" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-hashtag text-teal-600"></i>4. Number System / HCF & LCM</h2>
                    <p class="text-content mb-4">This topic covers fundamental concepts like divisibility rules, prime numbers, factors, multiples, and the calculation of HCF and LCM.</p>
                    <h3 class="sub-heading"><i class="fas fa-key text-teal-500"></i>Key Concepts:</h3>
                    <ul class="list-custom">
                        <li>Divisibility rules (for 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)</li>
                        <li>Prime numbers, composite numbers, factors, multiples, co-primes</li>
                    </ul>
                     <h3 class="sub-heading"><i class="fas fa-divide text-teal-500"></i>Remainder Theorem:</h3>
                    <ul class="list-custom">
                        <li>Basic: Dividend = (Divisor &times; Quotient) + Remainder.</li>
                        <li>Polynomial Remainder Theorem: Remainder of f(x) &divide; (x-a) is f(a). Example: Remainder of (x<sup>2</sup>+3x+5) &divide; (x-1) is 1<sup>2</sup>+3(1)+5 = 9.</li>
                        <li>Advanced Concepts (mention): Chinese Remainder Theorem (CRT), Euler's Totient Theorem, Fermat's Little Theorem are used for complex remainder problems.</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-stream text-teal-500"></i>HCF/LCM Remainder Problem Types:</h3>
                    <ul class="list-custom">
                        <li>Type 1 (HCF - Different Remainders): Greatest number dividing N<sub>1</sub>, N<sub>2</sub> leaving R<sub>1</sub>, R<sub>2</sub>. Solution: HCF(N<sub>1</sub>-R<sub>1</sub>, N<sub>2</sub>-R<sub>2</sub>).</li>
                        <li>Type 2 (LCM - Same Remainder): Least number divided by D<sub>1</sub>, D<sub>2</sub> leaving remainder R. Solution: LCM(D<sub>1</sub>, D<sub>2</sub>) + R.</li>
                        <li>Type 3 (LCM - Constant Difference): Least number divided by D<sub>1</sub>, D<sub>2</sub> leaving R<sub>1</sub>, R<sub>2</sub> where D<sub>1</sub>-R<sub>1</sub> = D<sub>2</sub>-R<sub>2</sub> = k. Solution: LCM(D<sub>1</sub>, D<sub>2</sub>) - k.</li>
                        <li>Type 4 (HCF - Same Unknown Remainder): Greatest number dividing N<sub>1</sub>, N<sub>2</sub>, N<sub>3</sub> leaving same remainder. Solution: HCF(N<sub>2</sub>-N<sub>1</sub>, N<sub>3</sub>-N<sub>2</sub>, N<sub>3</sub>-N<sub>1</sub>).</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-greater-than-equal text-teal-500"></i>HCF (Highest Common Factor / GCD):</h3>
                    <p class="text-content">The largest number that divides two or more numbers exactly.</p>
                    <h3 class="sub-heading"><i class="fas fa-less-than-equal text-teal-500"></i>LCM (Least Common Multiple):</h3>
                    <p class="text-content">The smallest number that is exactly divisible by two or more numbers.</p>
                    <h3 class="sub-heading"><i class="fas fa-link text-teal-500"></i>Relationship:</h3>
                    <p class="text-content">For two numbers A and B: <span class="formula">HCF(A,B) &times; LCM(A,B) = A &times; B</span></p>
                    <h3 class="sub-heading"><i class="fas fa-divide text-teal-500"></i>HCF/LCM of Fractions:</h3>
                    <p class="text-content">HCF(a/b, c/d) = <span class="formula">HCF(a,c) / LCM(b,d)</span></p>
                    <p class="text-content">LCM(a/b, c/d) = <span class="formula">LCM(a,c) / HCF(b,d)</span></p>
                    <h3 class="sub-heading"><i class="fas fa-ellipsis-h text-teal-500"></i>Trailing Zeros in n!:</h3>
                    <p class="text-content">Number of trailing zeros in n! = <span class="formula">&lfloor;n/5&rfloor; + &lfloor;n/25&rfloor; + &lfloor;n/125&rfloor; + ...</span></p>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Indices (Exponents) & Surds (Radicals):</h3>
                    <ul class="list-custom">
                        <li>a<sup>m</sup> &times; a<sup>n</sup> = a<sup>m+n</sup></li>
                        <li>a<sup>m</sup> / a<sup>n</sup> = a<sup>m-n</sup></li>
                        <li>(a<sup>m</sup>)<sup>n</sup> = a<sup>mn</sup></li>
                        <li>a<sup>0</sup> = 1 (for a &ne; 0)</li>
                        <li>a<sup>-n</sup> = 1/a<sup>n</sup></li>
                        <li>&radic;a &times; &radic;b = &radic;(ab)</li>
                    </ul>
                    <div class="calculator-container calculator-theme-slate">
                        <h4 class="calculator-title">
                             <i class="fas fa-calculator"></i>
                            HCF & LCM Calculator (for two numbers)
                        </h4>
                        <div class="calculator-description">
                             Calculate the HCF and LCM for two positive integers.
                         </div>
                        <div class="calculator-section">
                             <div class="calculator-grid grid-cols-1 sm:grid-cols-2">
                                 <div class="calculator-input-wrapper">
                                    <label for="num1HcfLcm" class="calculator-input-label">
                                         <i class="fas fa-hashtag"></i>
                                         Number 1
                                     </label>
                                     <input type="number" id="num1HcfLcm" class="calculator-input" placeholder="Enter first number">
                                 </div>
                                 <div class="calculator-input-wrapper">
                                     <label for="num2HcfLcm" class="calculator-input-label">
                                         <i class="fas fa-hashtag"></i>
                                         Number 2
                                     </label>
                                     <input type="number" id="num2HcfLcm" class="calculator-input" placeholder="Enter second number">
                                 </div>
                             </div>
                             <button id="calculateHcfLcm" class="calculator-button">
                                 <i class="fas fa-equals mr-2"></i>
                                 Calculate HCF & LCM
                             </button>
                             <div id="hcfLcmResult" class="calculator-result-area"></div>
                         </div>
                    </div>
                </div>

                <div id="topic-5" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-percentage text-teal-600"></i>5. Ratio and Proportion</h2>
                    <p class="text-content mb-4">Ratio compares two quantities, while proportion signifies the equality of two ratios.</p>
                    <h3 class="sub-heading"><i class="fas fa-vector-square text-teal-500"></i>Ratio (a:b):</h3>
                    <p class="text-content">'a' is antecedent, 'b' is consequent.</p>
                    <h3 class="sub-heading"><i class="fas fa-equals text-teal-500"></i>Proportion (a:b::c:d):</h3>
                    <p class="text-content"><span class="formula">a/b = c/d &rArr; ad = bc</span>. 'a,d' are extremes, 'b,c' are means.</p>
                    <h3 class="sub-heading"><i class="fas fa-sitemap text-teal-500"></i>Types of Proportion:</h3>
                    <ul class="list-custom">
                        <li>Fourth Proportional (d)</li>
                        <li>Third Proportional (to a,b is c if a:b::b:c)</li>
                        <li>Mean Proportional (between a,c is b if a:b::b:c &rArr; b<sup>2</sup>=ac)</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-cogs text-teal-500"></i>Properties:</h3>
                    <ul class="list-custom">
                        <li>Invertendo: If a/b = c/d, then b/a = d/c</li>
                        <li>Alternendo: If a/b = c/d, then a/c = b/d</li>
                        <li>Componendo: If a/b = c/d, then (a+b)/b = (c+d)/d</li>
                        <li>Dividendo: If a/b = c/d, then (a-b)/b = (c-d)/d</li>
                        <li>Componendo & Dividendo: If a/b = c/d, then (a+b)/(a-b) = (c+d)/(c-d)</li>
                        <li>Addendo: If a/b = c/d = e/f = ..., then each ratio = (a+c+e+...)/(b+d+f+...)</li>
                        <li>Subtrahendo: If a/b = c/d, then each ratio = (a-c)/(b-d)</li>
                    </ul>
                    <p class="text-content mt-2">Duplicate Ratio: a<sup>2</sup>:b<sup>2</sup>. Triplicate Ratio: a<sup>3</sup>:b<sup>3</sup>. Sub-duplicate Ratio: &radic;a:&radic;b. Sub-triplicate Ratio: <sup>3</sup>&radic;a:<sup>3</sup>&radic;b.</p>
                    <div class="calculator-container calculator-theme-teal">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Fourth Proportional Calculator (a:b::c:X)
                        </h4>
                         <div class="calculator-description">
                            Find the fourth proportional (X) in the proportion a:b::c:X.
                         </div>
                        <div class="calculator-section">
                            <div class="calculator-grid">
                                <div class="calculator-input-wrapper">
                                    <label for="ratioA" class="calculator-input-label">
                                         <i class="fas fa-percentage"></i>
                                        Value a
                                    </label>
                                    <input type="number" id="ratioA" class="calculator-input" placeholder="Enter value a">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="ratioB" class="calculator-input-label">
                                         <i class="fas fa-percentage"></i>
                                        Value b
                                    </label>
                                    <input type="number" id="ratioB" class="calculator-input" placeholder="Enter value b">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="ratioC" class="calculator-input-label">
                                         <i class="fas fa-percentage"></i>
                                        Value c
                                    </label>
                                    <input type="number" id="ratioC" class="calculator-input" placeholder="Enter value c">
                                </div>
                            </div>
                            <button id="calculateFourthProportional" class="calculator-button">
                                 <i class="fas fa-equals mr-2"></i>
                                Find X
                            </button>
                            <div id="fourthProportionalResult" class="calculator-result-area"></div>
                        </div>
                    </div>
                </div>

                <div id="topic-6" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-chart-line text-teal-600"></i>6. Average</h2>
                    <p class="text-content mb-4">The average or mean represents the central value of a set of observations.</p>
                    <h3 class="sub-heading"><i class="fas fa-calculator text-teal-500"></i>Basic Average:</h3>
                    <p class="text-content"><span class="formula">Average = Sum of Observations / Number of Observations</span></p>
                    <h3 class="sub-heading"><i class="fas fa-balance-scale-right text-teal-500"></i>Weighted Average:</h3>
                    <p class="text-content"><span class="formula">(w<sub>1</sub>x<sub>1</sub> + w<sub>2</sub>x<sub>2</sub> + ... + w<sub>n</sub>x<sub>n</sub>) / (w<sub>1</sub> + w<sub>2</sub> + ... + w<sub>n</sub>)</span></p>
                    <h3 class="sub-heading"><i class="fas fa-cogs text-teal-500"></i>Properties & Specific Formulas:</h3>
                    <ul class="list-custom">
                        <li>If each number is changed by k, the average also changes by k (for +,-,&times;,&divide;).</li>
                        <li>Average of first n natural numbers: <span class="formula">(n+1)/2</span>.</li>
                        <li>Average of first n odd numbers: <span class="formula">n</span>.</li>
                        <li>Average of first n even numbers: <span class="formula">n+1</span>.</li>
                        <li>Average of squares of first n natural numbers: <span class="formula">(n+1)(2n+1)/6</span>.</li>
                        <li>Average of cubes of first n natural numbers: <span class="formula">n(n+1)<sup>2</sup>/4</span>.</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-tachometer-alt text-teal-500"></i>Average Speed:</h3>
                    <ul class="list-custom">
                        <li>General Formula: Total Distance / Total Time.</li>
                        <li>Special Case (Equal Distances at Speeds x and y): Average Speed = <span class="formula">2xy / (x+y)</span>.</li>
                        <li>For three equal distances covered at speeds x, y, z: Average Speed = <span class="formula">3xyz / (xy + yz + zx)</span>.</li>
                    </ul>
                    <div class="calculator-container calculator-theme-slate">
                        <h4 class="calculator-title">
                             <i class="fas fa-calculator"></i>
                            Simple Average Calculator
                        </h4>
                         <div class="calculator-description">
                            Calculate the simple average of a list of numbers.
                         </div>
                        <div class="calculator-section">
                            <div class="calculator-input-group">
                                <div class="calculator-input-wrapper">
                                    <label for="avgNumbers" class="calculator-input-label">
                                        <i class="fas fa-list-ol"></i>
                                        Enter numbers (comma-separated)
                                    </label>
                                    <input type="text" id="avgNumbers" class="calculator-input" placeholder="e.g., 10,20,30">
                                </div>
                            </div>
                            <button id="calculateAverage" class="calculator-button">
                                 <i class="fas fa-equals mr-2"></i>
                                Calculate Average
                            </button>
                            <div id="averageResult" class="calculator-result-area"></div>
                        </div>
                    </div>
                </div>

                <div id="topic-7" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-handshake text-teal-600"></i>7. Partnership</h2>
                    <p class="text-content mb-4">This topic deals with how profits or losses are shared among partners in a business venture based on their investments and time periods.</p>
                    <h3 class="sub-heading"><i class="fas fa-key text-teal-500"></i>Key Concept:</h3>
                    <p class="text-content">Profits (or losses) are shared in the ratio of 'effective' investments.</p>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Formula:</h3>
                    <p class="text-content">Ratio of Profits = Ratio of (Investment &times; Time Period)</p>
                    <p class="text-content">If P<sub>A</sub>, P<sub>B</sub> are profits, I<sub>A</sub>, I<sub>B</sub> are investments, T<sub>A</sub>, T<sub>B</sub> are time periods:</p>
                    <p class="text-content"><span class="formula">P<sub>A</sub> / P<sub>B</sub> = (I<sub>A</sub> &times; T<sub>A</sub>) / (I<sub>B</sub> &times; T<sub>B</sub>)</span></p>
                    <h3 class="sub-heading"><i class="fas fa-sitemap text-teal-500"></i>Types:</h3>
                    <ul class="list-custom">
                        <li>Simple Partnership: Investments for the same time.</li>
                        <li>Compound Partnership: Investments for different times.</li>
                        <li>Sleeping Partner: Invests but doesn't work.</li>
                        <li>Working Partner: Invests and works, may get extra share/salary.</li>
                    </ul>
                    <div class="calculator-container calculator-theme-teal">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Simple Partnership Profit Share (2 Partners, Same Time)
                        </h4>
                        <div class="calculator-description">
                            Calculate the profit share for two partners with investments over the same period.
                        </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-3">
                                <div class="calculator-input-wrapper">
                                    <label for="investA" class="calculator-input-label">
                                        <i class="fas fa-coins"></i>
                                        Partner A's Investment
                                    </label>
                                    <input type="number" id="investA" class="calculator-input" placeholder="Enter A's investment">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="investB" class="calculator-input-label">
                                        <i class="fas fa-coins"></i>
                                        Partner B's Investment
                                    </label>
                                    <input type="number" id="investB" class="calculator-input" placeholder="Enter B's investment">
                                </div>
                                <div class="calculator-input-wrapper">
                                     <label for="totalProfit" class="calculator-input-label">
                                         <i class="fas fa-chart-line"></i>
                                        Total Profit
                                    </label>
                                    <input type="number" id="totalProfit" class="calculator-input" placeholder="Enter total profit">
                                </div>
                            </div>
                        </div>
                        <button id="calculatePartnership" class="calculator-button">
                             <i class="fas fa-equals mr-2"></i>
                            Calculate Shares
                        </button>
                        <div id="partnershipResult" class="calculator-result-area"></div>
                    </div>
                </div>

                 <div id="topic-8" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-user-clock text-teal-600"></i>8. Ages</h2>
                    <p class="text-content mb-4">Problems on ages involve forming linear equations based on relationships between ages of individuals at different points in time (past, present, future).</p>
                    <h3 class="sub-heading"><i class="fas fa-key text-teal-500"></i>Key Concept:</h3>
                    <p class="text-content">Represent present ages using variables (e.g., x, y). Form linear equations based on given conditions.</p>
                    <ul class="list-custom">
                        <li>'k years ago': Age was (Present Age - k)</li>
                        <li>'k years hence': Age will be (Present Age + k)</li>
                    </ul>
                    <p class="text-content mt-2">Solve the system of equations to find the ages.</p>
                </div>

                <div id="topic-9" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-percent text-teal-600"></i>9. Percentage</h2>
                    <p class="text-content mb-4">Percentage means 'per hundred' and is a way to express a fraction or a ratio as a part of 100.</p>
                    <h3 class="sub-heading"><i class="fas fa-key text-teal-500"></i>Basic Concept:</h3>
                    <p class="text-content">x% = <span class="formula">x / 100</span></p>
                     <p class="text-content">Also, <span class="formula">x% of y = y% of x</span>.</p>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Key Formulas:</h3>
                    <ul class="list-custom">
                        <li>Percentage Increase = <span class="formula">(Increase / Original Value) &times; 100</span></li>
                        <li>Percentage Decrease = <span class="formula">(Decrease / Original Value) &times; 100</span></li>
                        <li>Result after % increase = <span class="formula">Original Value &times; (1 + Percent Increase/100)</span></li>
                        <li>Result after % decrease = <span class="formula">Original Value &times; (1 - Percent Decrease/100)</span></li>
                        <li>Successive Percentage Change (a%, b%): Net Change = <span class="formula">(a + b + ab/100)%</span> (Use + for increase, - for decrease)</li>
                        <li>If A is x% more than B: A = B(1 + x/100). B is <span class="formula">(x / (100+x)) &times; 100%</span> less than A.</li>
                        <li>If A is x% less than B: A = B(1 - x/100). B is <span class="formula">(x / (100-x)) &times; 100%</span> more than A.</li>
                        <li>Population Growth: P<sub>final</sub> = P<sub>initial</sub>(1 + R/100)<sup>n</sup></li>
                        <li>Depreciation: V<sub>final</sub> = V<sub>initial</sub>(1 - R/100)<sup>n</sup></li>
                    </ul>
                    <div class="calculator-container calculator-theme-slate">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Percentage Calculator
                        </h4>
                        <div class="calculator-description">
                            Calculate X percent of a base value Y.
                        </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-2">
                                <div class="calculator-input-wrapper">
                                    <label for="percentVal" class="calculator-input-label">
                                         <i class="fas fa-percentage"></i>
                                        Percentage (%)
                                    </label>
                                    <input type="number" id="percentVal" class="calculator-input" placeholder="Enter percentage">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="baseVal" class="calculator-input-label">
                                         <i class="fas fa-calculator"></i>
                                        Base Value
                                    </label>
                                    <input type="number" id="baseVal" class="calculator-input" placeholder="Enter base value">
                                </div>
                            </div>
                        </div>
                        <button id="calculatePercentage" class="calculator-button">
                             <i class="fas fa-equals mr-2"></i>
                            Calculate X% of Y
                        </button>
                        <div id="percentageResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-10" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-coins text-teal-600"></i>10. Profit & Loss</h2>
                    <p class="text-content mb-4">This topic deals with calculations involving cost price, selling price, marked price, profit, loss, and discount in commercial transactions.</p>
                    <h3 class="sub-heading"><i class="fas fa-tags text-teal-500"></i>Key Terms:</h3>
                    <ul class="list-custom">
                        <li>CP: Cost Price</li>
                        <li>SP: Selling Price</li>
                        <li>MP: Marked Price / List Price</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Formulas:</h3>
                    <ul class="list-custom">
                        <li>Profit (P) = SP - CP (when SP > CP)</li>
                        <li>Loss (L) = CP - SP (when CP > SP)</li>
                        <li>Profit % = <span class="formula">(P / CP) &times; 100</span></li>
                        <li>Loss % = <span class="formula">(L / CP) &times; 100</span></li>
                        <li>Discount (D) = MP - SP</li>
                        <li>Discount % = <span class="formula">(D / MP) &times; 100</span></li>
                        <li>SP = <span class="formula">CP &times; (100 + Profit %) / 100</span></li>
                        <li>SP = <span class="formula">CP &times; (100 - Loss %) / 100</span></li>
                        <li>CP = <span class="formula">SP &times; 100 / (100 + Profit %)</span></li>
                        <li>CP = <span class="formula">SP &times; 100 / (100 - Loss %)</span></li>
                        <li>SP = <span class="formula">MP &times; (100 - Discount %) / 100</span></li>
                        <li>Relation: <span class="formula">CP / MP = (100 - Discount %) / (100 + Profit %)</span></li>
                        <li>Dishonest Dealer Profit % (False Weight): <span class="formula">(True Value - False Weight) / False Weight &times; 100</span> or <span class="formula">Error / (True Value - Error) &times; 100</span></li>
                         <li>Dishonest Dealer (Overall Gain G%, Price Gain/Loss x%): <span class="formula">(100+G)/(100+x) = True Weight / False Weight</span></li>
                    </ul>
                     <div class="calculator-container calculator-theme-teal">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Profit/Loss Calculator
                        </h4>
                         <div class="calculator-description">
                            Calculate profit, loss, profit percentage, or loss percentage.
                         </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-2">
                                <div class="calculator-input-wrapper">
                                    <label for="costPrice" class="calculator-input-label">
                                        <i class="fas fa-dollar-sign"></i>
                                        Cost Price (CP)
                                    </label>
                                    <input type="number" id="costPrice" class="calculator-input" placeholder="Enter cost price">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="sellingPrice" class="calculator-input-label">
                                         <i class="fas fa-dollar-sign"></i>
                                        Selling Price (SP)
                                    </label>
                                    <input type="number" id="sellingPrice" class="calculator-input" placeholder="Enter selling price">
                                </div>
                            </div>
                        </div>
                        <button id="calculateProfitLoss" class="calculator-button">
                             <i class="fas fa-equals mr-2"></i>
                            Calculate Profit/Loss
                        </button>
                        <div id="profitLossResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-11" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-tachometer-alt text-teal-600"></i>11. Time, Speed & Distance</h2>
                    <p class="text-content mb-4">This fundamental topic explores the relationship between distance, speed, and time.</p>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Basic Formula:</h3>
                    <p class="text-content"><span class="formula">Distance = Speed &times; Time</span></p>
                    <h3 class="sub-heading"><i class="fas fa-exchange-alt text-teal-500"></i>Unit Conversion:</h3>
                    <ul class="list-custom">
                        <li>1 km/hr = <span class="formula">5/18 m/s</span></li>
                        <li>1 m/s = <span class="formula">18/5 km/hr</span></li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-arrows-alt-h text-teal-500"></i>Proportionality:</h3>
                    <ul class="list-custom">
                        <li>If Distance is constant: Speed &prop; 1/Time</li>
                        <li>If Time is constant: Distance &prop; Speed</li>
                        <li>If Speed is constant: Distance &prop; Time</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-tachometer-alt text-teal-500"></i>Average Speed:</h3>
                    <ul class="list-custom">
                        <li>Equal distances at speeds s<sub>1</sub>, s<sub>2</sub>: <span class="formula">2s<sub>1</sub>s<sub>2</sub> / (s<sub>1</sub>+s<sub>2</sub>)</span></li>
                        <li>General Case: <span class="formula">Total Distance / Total Time</span></li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-running text-teal-500"></i>Relative Speed:</h3>
                    <ul class="list-custom">
                        <li>Opposite directions: S<sub>rel</sub> = S<sub>1</sub> + S<sub>2</sub></li>
                        <li>Same direction: S<sub>rel</sub> = |S<sub>1</sub> - S<sub>2</sub>|</li>
                    </ul>
                    <div class="calculator-container calculator-theme-slate">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Time, Speed, Distance Calculator
                        </h4>
                         <div class="calculator-description">
                            Enter any two values to calculate the third (Distance, Speed, or Time).
                         </div>
                        <div class="calculator-section">
                            <div class="calculator-grid">
                                <div class="calculator-input-wrapper">
                                    <label for="tsdDistance" class="calculator-input-label">
                                         <i class="fas fa-road"></i>
                                        Distance
                                    </label>
                                    <input type="number" id="tsdDistance" class="calculator-input" placeholder="Leave blank to solve">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="tsdSpeed" class="calculator-input-label">
                                         <i class="fas fa-tachometer-alt"></i>
                                        Speed
                                    </label>
                                    <input type="number" id="tsdSpeed" class="calculator-input" placeholder="Leave blank to solve">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="tsdTime" class="calculator-input-label">
                                         <i class="fas fa-clock"></i>
                                        Time
                                    </label>
                                    <input type="number" id="tsdTime" class="calculator-input" placeholder="Leave blank to solve">
                                </div>
                            </div>
                        </div>
                        <button id="calculateTSD" class="calculator-button">
                             <i class="fas fa-equals mr-2"></i>
                            Calculate Missing Value
                        </button>
                        <div id="tsdResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-12" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-train text-teal-600"></i>12. Problems on Trains</h2>
                    <p class="text-content mb-4">These problems apply Time, Speed, Distance concepts, considering the length of trains and objects they cross.</p>
                    <h3 class="sub-heading"><i class="fas fa-key text-teal-500"></i>Key Concepts:</h3>
                    <ul class="list-custom">
                        <li>Crossing a pole/man (negligible length): Distance = Length of train (L<sub>T</sub>). Time = <span class="formula">L<sub>T</sub> / S<sub>T</sub></span>.</li>
                        <li>Crossing a platform/bridge (length L<sub>P</sub>): Distance = L<sub>T</sub> + L<sub>P</sub>. Time = <span class="formula">(L<sub>T</sub> + L<sub>P</sub>) / S<sub>T</sub></span>.</li>
                        <li>Train crossing another train (opposite direction, L<sub>T1</sub>, L<sub>T2</sub>, S<sub>1</sub>, S<sub>2</sub>): Distance = L<sub>T1</sub> + L<sub>T2</sub>; Speed = S<sub>1</sub> + S<sub>2</sub>. Time = <span class="formula">(L<sub>T1</sub> + L<sub>T2</sub>) / (S<sub>1</sub> + S<sub>2</sub>)</span>.</li>
                        <li>Train crossing another train (same direction): Distance = L<sub>T1</sub> + L<sub>T2</sub>; Speed = |S<sub>1</sub> - S<sub>2</sub>|. Time = <span class="formula">(L<sub>T1</sub> + L<sub>T2</sub>) / |S<sub>1</sub> - S<sub>2</sub>|</span>.</li>
                    </ul>
                </div>

                <div id="topic-13" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-water text-teal-600"></i>13. Boat and Stream</h2>
                    <p class="text-content mb-4">This involves calculating speeds of boats in still water, downstream (with current), and upstream (against current).</p>
                    <h3 class="sub-heading"><i class="fas fa-info-circle text-teal-500"></i>Let:</h3>
                    <ul class="list-custom">
                        <li>B (or u) = Speed of boat in still water</li>
                        <li>S (or v) = Speed of the stream/current</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Formulas:</h3>
                    <ul class="list-custom">
                        <li>Downstream Speed (D) = <span class="formula">B + S</span> (or $u+v$)</li>
                        <li>Upstream Speed (U) = <span class="formula">B - S</span> (or $u-v$)</li>
                        <li>Speed of Boat in Still Water (B or u) = <span class="formula">(D + U) / 2</span></li>
                        <li>Speed of Stream (S or v) = <span class="formula">(D - U) / 2</span></li>
                        <li>Average speed of boat for a round trip (equal distance upstream and downstream): <span class="formula">(U &times; D) / B</span> or <span class="formula">((B-S)(B+S))/B</span> = <span class="formula">(B<sup>2</sup>-S<sup>2</sup>)/B</span></li>
                    </ul>
                    <div class="calculator-container calculator-theme-teal">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Boat & Stream Speed Calculator
                        </h4>
                        <div class="calculator-description">
                            Calculate downstream and upstream speeds based on boat and stream speeds.
                        </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-2">
                                <div class="calculator-input-wrapper">
                                    <label for="boatSpeed" class="calculator-input-label">
                                         <i class="fas fa-ship"></i>
                                        Boat Speed in Still Water (B)
                                    </label>
                                    <input type="number" id="boatSpeed" class="calculator-input" placeholder="Enter boat speed">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="streamSpeed" class="calculator-input-label">
                                         <i class="fas fa-water"></i>
                                        Stream Speed (S)
                                    </label>
                                    <input type="number" id="streamSpeed" class="calculator-input" placeholder="Enter stream speed">
                                </div>
                            </div>
                        </div>
                        <button id="calculateBoatStream" class="calculator-button">
                            <i class="fas fa-equals mr-2"></i>
                            Calculate Downstream/Upstream Speeds
                        </button>
                        <div id="boatStreamResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-14" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-clock text-teal-600"></i>14. Time & Work / Pipes and Cisterns</h2>
                    <p class="text-content mb-4">These problems relate work done, efficiency of workers/pipes, and time taken.</p>
                    <h3 class="sub-heading"><i class="fas fa-key text-teal-500"></i>Basic Concept:</h3>
                    <p class="text-content"><span class="formula">Work = Efficiency &times; Time</span></p>
                    <p class="text-content">Efficiency &prop; 1/Time</p>
                    <h3 class="sub-heading"><i class="fas fa-users text-teal-500"></i>Combined Work:</h3>
                    <p class="text-content">If A takes x days and B takes y days, together they take <span class="formula">xy / (x+y)</span> days.</p>
                    <h3 class="sub-heading"><i class="fas fa-list-ol text-teal-500"></i>LCM Method (Recommended):</h3>
                    <ol class="list-decimal list-inside text-slate-600 space-y-1 pl-2">
                        <li>Assume Total Work = LCM of individual times.</li>
                        <li>Calculate individual efficiencies: Efficiency = Total Work / Individual Time.</li>
                        <li>Calculate combined efficiency.</li>
                        <li>Time = Total Work / Combined Efficiency.</li>
                    </ol>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>MDH Formula:</h3>
                    <p class="text-content"><span class="formula">(M<sub>1</sub>D<sub>1</sub>H<sub>1</sub>E<sub>1</sub>) / W<sub>1</sub> = (M<sub>2</sub>D<sub>2</sub>H<sub>2</sub>E<sub>2</sub>) / W<sub>2</sub></span> (M=Men, D=Days, H=Hours, E=Efficiency, W=Work)</p>
                    <h3 class="sub-heading"><i class="fas fa-tint text-teal-500"></i>Pipes and Cisterns:</h3>
                    <p class="text-content">Inlet pipes do positive work (filling), Outlet pipes do negative work (emptying). Apply same Time & Work concepts.</p>
                    <div class="calculator-container calculator-theme-slate">
                        <h4 class="calculator-title">
                             <i class="fas fa-calculator"></i>
                            Combined Work Time (2 People)
                        </h4>
                        <div class="calculator-description">
                            Calculate the time taken for two individuals to complete a task together.
                        </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-2">
                                <div class="calculator-input-wrapper">
                                    <label for="timeA" class="calculator-input-label">
                                        <i class="fas fa-person"></i>
                                        Time taken by A (days)
                                    </label>
                                    <input type="number" id="timeA" class="calculator-input" placeholder="Enter time for A">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="timeB" class="calculator-input-label">
                                         <i class="fas fa-person"></i>
                                        Time taken by B (days)
                                    </label>
                                    <input type="number" id="timeB" class="calculator-input" placeholder="Enter time for B">
                                </div>
                            </div>
                        </div>
                        <button id="calculateCombinedWork" class="calculator-button">
                             <i class="fas fa-equals mr-2"></i>
                            Calculate Combined Time
                        </button>
                        <div id="combinedWorkResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-15" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-money-bill-wave text-teal-600"></i>15. Simple and Compound Interest</h2>
                    <p class="text-content mb-4">This section covers calculations of interest earned or paid on a principal amount over a period.</p>
                    <h3 class="sub-heading"><i class="fas fa-info-circle text-teal-500"></i>Let:</h3>
                    <ul class="list-custom">
                        <li>P = Principal</li>
                        <li>R = Rate of Interest (per annum)</li>
                        <li>T = Time Period (in years)</li>
                        <li>A = Amount = Principal + Interest</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-hand-holding-usd text-teal-500"></i>Simple Interest (SI):</h3>
                    <p class="text-content">SI = <span class="formula">(P &times; R &times; T) / 100</span></p>
                    <p class="text-content">Amount (SI): A = P(1 + RT/100)</p>
                    <h3 class="sub-heading"><i class="fas fa-piggy-bank text-teal-500"></i>Compound Interest (CI):</h3>
                    <p class="text-content">Amount (CI compounded annually): A = <span class="formula">P(1 + R/100)<sup>T</sup></span></p>
                    <p class="text-content">CI = A - P = <span class="formula">P[(1 + R/100)<sup>T</sup> - 1]</span></p>
                    <h3 class="sub-heading"><i class="fas fa-calendar-alt text-teal-500"></i>Compounding Frequencies:</h3>
                    <ul class="list-custom">
                        <li>Half-yearly: Rate = R/2, Time = 2T. A = P(1 + (R/2)/100)<sup>2T</sup></li>
                        <li>Quarterly: Rate = R/4, Time = 4T. A = P(1 + (R/4)/100)<sup>4T</sup></li>
                        <li>Monthly: Rate = R/12, Time = 12T. A = P(1 + (R/12)/100)<sup>12T</sup></li>
                        <li>Continuous Compounding: <span class="formula">A = P &times; e<sup>(RT/100)</sup></span> (where e &approx; 2.71828)</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-balance-scale-left text-teal-500"></i>Difference between CI and SI:</h3>
                    <ul class="list-custom">
                        <li>For 2 years: CI - SI = <span class="formula">P(R/100)<sup>2</sup></span></li>
                        <li>For 3 years: CI - SI = <span class="formula">P(R/100)<sup>2</sup>(3 + R/100)</span></li>
                    </ul>
                     <h3 class="sub-heading"><i class="fas fa-landmark text-teal-500"></i>Installments:</h3>
                    <p class="text-content">For a loan P repaid in T equal annual installments of x at R% CI: <span class="formula">P = x / (1+R/100) + x / (1+R/100)<sup>2</sup> + ... + x / (1+R/100)<sup>T</sup></span></p>
                    <h3 class="sub-heading"><i class="fas fa-magic text-teal-500"></i>Rule of 72:</h3>
                    <p class="text-content">Approximate years to double investment = <span class="formula">72 / (Annual Interest Rate in %)</span></p>
                    <div class="calculator-container calculator-theme-teal">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Interest Calculator
                        </h4>
                         <div class="calculator-description">
                            Calculate Simple and Compound Interest.
                         </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-3">
                                <div class="calculator-input-wrapper">
                                    <label for="principal" class="calculator-input-label">
                                         <i class="fas fa-money-bill"></i>
                                        Principal (P)
                                    </label>
                                    <input type="number" id="principal" class="calculator-input" placeholder="Enter principal">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="rate" class="calculator-input-label">
                                         <i class="fas fa-percent"></i>
                                        Rate (R% p.a.)
                                    </label>
                                    <input type="number" id="rate" class="calculator-input" placeholder="Enter annual rate">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="time" class="calculator-input-label">
                                         <i class="fas fa-clock"></i>
                                        Time (T years)
                                    </label>
                                    <input type="number" id="time" class="calculator-input" placeholder="Enter time in years">
                                </div>
                            </div>
                        </div>
                        <button id="calculateInterest" class="calculator-button">
                            <i class="fas fa-equals mr-2"></i>
                            Calculate SI & CI (Annual)
                        </button>
                        <div id="interestResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-16" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-flask text-teal-600"></i>16. Mixture & Allegations</h2>
                    <p class="text-content mb-4">This topic deals with combining ingredients and finding ratios or properties of the resulting mixture.</p>
                    <h3 class="sub-heading"><i class="fas fa-balance-scale text-teal-500"></i>Allegation Rule:</h3>
                    <p class="text-content">Used to find the ratio to mix two ingredients (Cheaper C, Dearer D) to get a Mean value M.</p>
                    <p class="text-content">Ratio (Cheaper Qty : Dearer Qty) = <span class="formula">(D - M) : (M - C)</span></p>
                    <div class="my-4 p-4 bg-slate-100 rounded-lg text-center shadow">
                        <div class="flex justify-around items-center text-slate-700 font-medium">
                            <div>Cheaper (C)</div>
                            <div>Dearer (D)</div>
                        </div>
                        <div class="text-3xl my-2 text-teal-600">&searr; &nbsp; &nbsp; &nbsp; &nearr;</div>
                        <div class="font-semibold text-xl text-slate-800">Mean (M)</div>
                        <div class="text-3xl my-2 text-teal-600">&nearr; &nbsp; &nbsp; &nbsp; &searr;</div>
                        <div class="flex justify-around items-center text-slate-700 font-medium">
                            <div>(D - M)</div>
                            <div>(M - C)</div>
                        </div>
                        <p class="mt-3 text-sm text-slate-600">Ratio of Quantities is (D-M) : (M-C)</p>
                    </div>
                    <h3 class="sub-heading"><i class="fas fa-sync-alt text-teal-500"></i>Removal and Replacement:</h3>
                    <p class="text-content">If a container has C units of mixture, and R units are taken out and replaced with another substance n times:</p>
                    <p class="text-content">Quantity of original liquid left = <span class="formula">C(1 - R/C)<sup>n</sup></span></p>
                    <p class="text-content">If different volumes (a, b, c...) are replaced from total capacity C: Final Qty of original = <span class="formula">C(1–a/C)(1–b/C)(1–c/C)…</span></p>
                </div>

                <div id="topic-17" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-random text-teal-600"></i>17. Permutation and Combination</h2>
                    <p class="text-content mb-4">Permutation deals with arrangements (order matters), while combination deals with selections (order doesn't matter).</p>
                    <h3 class="sub-heading"><i class="fas fa-exclamation text-teal-500"></i>Factorial:</h3>
                    <p class="text-content">n! = n &times; (n-1) &times; ... &times; 1. (0! = 1)</p>
                    <h3 class="sub-heading"><i class="fas fa-sort-alpha-down text-teal-500"></i>Permutation (Arrangement):</h3>
                    <p class="text-content"><sup>n</sup>P<sub>r</sub> = <span class="formula">n! / (n-r)!</span></p>
                    <h3 class="sub-heading"><i class="fas fa-object-group text-teal-500"></i>Combination (Selection):</h3>
                    <p class="text-content"><sup>n</sup>C<sub>r</sub> = <span class="formula">n! / [r!(n-r)!]</span></p>
                    <h3 class="sub-heading"><i class="fas fa-star text-teal-500"></i>Important Properties:</h3>
                    <ul class="list-custom">
                        <li><sup>n</sup>C<sub>r</sub> = <sup>n</sup>C<sub>n-r</sub></li>
                        <li><sup>n</sup>C<sub>0</sub> = 1, <sup>n</sup>C<sub>1</sub> = n, <sup>n</sup>C<sub>n</sub> = 1</li>
                        <li><sup>n</sup>P<sub>r</sub> = <sup>n</sup>C<sub>r</sub> &times; r!</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-circle-notch text-teal-500"></i>Circular Permutations:</h3>
                    <ul class="list-custom">
                        <li>n distinct objects around a circle: (n-1)!</li>
                        <li>n distinct beads (necklace): (n-1)! / 2</li>
                    </ul>
                     <h3 class="sub-heading"><i class="fas fa-redo-alt text-teal-500"></i>Permutations with Repetitions:</h3>
                    <p class="text-content">Number of permutations of n objects where there are p identical objects of type 1, q of type 2, ..., r of type k is <span class="formula">n! / (p!q!...r!)</span> (where p+q+...+r=n).</p>
                    <div class="calculator-container calculator-theme-slate">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Permutation (nPr) & Combination (nCr) Calculator
                        </h4>
                        <div class="calculator-description">
                            Calculate permutations and combinations.
                        </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-2">
                                <div class="calculator-input-wrapper">
                                    <label for="pncN" class="calculator-input-label">
                                         <i class="fas fa-list-ol"></i>
                                        Total items (n)
                                    </label>
                                    <input type="number" id="pncN" class="calculator-input" placeholder="Enter total items">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="pncR" class="calculator-input-label">
                                         <i class="fas fa-list"></i>
                                        Items to choose/arrange (r)
                                    </label>
                                    <input type="number" id="pncR" class="calculator-input" placeholder="Enter items to choose">
                                </div>
                            </div>
                        </div>
                        <button id="calculatePnC" class="calculator-button">
                             <i class="fas fa-equals mr-2"></i>
                            Calculate nPr & nCr
                        </button>
                        <div id="pncResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-18" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-dice text-teal-600"></i>18. Probability</h2>
                    <p class="text-content mb-4">Probability measures the likelihood of an event occurring.</p>
                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Basic Formula:</h3>
                    <p class="text-content">P(E) = <span class="formula">(Number of Favorable Outcomes) / (Total Number of Possible Outcomes)</span> = n(E) / n(S)</p>
                    <h3 class="sub-heading"><i class="fas fa-arrows-alt-v text-teal-500"></i>Range:</h3>
                    <p class="text-content">0 &le; P(E) &le; 1. P(Impossible Event)=0. P(Sure Event)=1.</p>
                    <h3 class="sub-heading"><i class="fas fa-key text-teal-500"></i>Key Rules:</h3>
                    <ul class="list-custom">
                        <li>Complementary Event: P(Not E) = P(E') = 1 - P(E)</li>
                        <li>Mutually Exclusive Events (cannot happen together): P(A&cup;B) = P(A) + P(B)</li>
                        <li>Independent Events (occurrence of one doesn't affect other): P(A&cap;B) = P(A) &times; P(B)</li>
                        <li>General Addition Rule: P(A&cup;B) = P(A) + P(B) - P(A&cap;B)</li>
                        <li>Conditional Probability (A given B occurred): P(A|B) = P(A&cap;B) / P(B)</li>
                        <li>General Multiplication Rule: P(A&cap;B) = P(A) &times; P(B|A) = P(B) &times; P(A|B)</li>
                        <li>Bayes' Theorem: <span class="formula">P(A|B) = [P(B|A) &times; P(A)] / P(B)</span></li>
                    </ul>
                    <div class="calculator-container calculator-theme-teal">
                        <h4 class="calculator-title">
                            <i class="fas fa-calculator"></i>
                            Basic Probability Calculator P(E) = n(E)/n(S)
                        </h4>
                        <div class="calculator-description">
                            Calculate the probability of an event based on favorable and total outcomes.
                        </div>
                        <div class="calculator-section">
                            <div class="calculator-grid grid-cols-1 sm:grid-cols-2">
                                <div class="calculator-input-wrapper">
                                    <label for="favorableOutcomes" class="calculator-input-label">
                                         <i class="fas fa-check-circle"></i>
                                        Favorable Outcomes n(E)
                                    </label>
                                    <input type="number" id="favorableOutcomes" class="calculator-input" placeholder="Enter favorable outcomes">
                                </div>
                                <div class="calculator-input-wrapper">
                                    <label for="totalOutcomes" class="calculator-input-label">
                                         <i class="fas fa-list"></i>
                                        Total Outcomes n(S)
                                    </label>
                                    <input type="number" id="totalOutcomes" class="calculator-input" placeholder="Enter total outcomes">
                                </div>
                            </div>
                        </div>
                        <button id="calculateProbability" class="calculator-button">
                            <i class="fas fa-equals mr-2"></i>
                            Calculate Probability
                        </button>
                        <div id="probabilityResult" class="calculator-result-area"></div>
                    </div>
                </div>

                <div id="topic-19" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-chart-bar text-teal-600"></i>19. Data Interpretation (DI)</h2>
                    <p class="text-content mb-4">DI involves understanding and analyzing data presented in various formats like tables, graphs, and charts.</p>
                    <h3 class="sub-heading"><i class="fas fa-table text-teal-500"></i>Types:</h3>
                    <ul class="list-custom">
                        <li>Tables</li>
                        <li>Bar Graphs (Simple, Multiple, Stacked)</li>
                        <li>Line Graphs</li>
                        <li>Pie Charts (Single, Multiple)</li>
                        <li>Mixed Graphs, Radar Graphs</li>
                    </ul>
                    <h3 class="sub-heading"><i class="fas fa-cogs text-teal-500"></i>Skills:</h3>
                    <ul class="list-custom">
                        <li>Accurate data reading.</li>
                        <li>Quick calculations: Percentages, Averages, Ratios, Differences, Sums.</li>
                        <li>Approximation skills.</li>
                        <li>Attention to units, labels, footnotes.</li>
                    </ul>
                </div>

                <div id="topic-20" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-file-alt text-teal-600"></i>20. Caselet DI</h2>
                    <p class="text-content mb-4">Caselet DI presents data in descriptive paragraphs. The skill lies in comprehending the text, extracting relevant data, organizing it (often into a table), and then answering questions.</p>
                    <p class="text-content">This requires strong reading comprehension and analytical skills to structure the unstructured information effectively.</p>
                </div>

                <div id="topic-21" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-check-double text-teal-600"></i>21. Data Sufficiency</h2>
                    <p class="text-content mb-4">Data Sufficiency questions test whether the given data in statements is sufficient to answer a question, not necessarily to find the actual answer.</p>
                    <h3 class="sub-heading"><i class="fas fa-tasks text-teal-500"></i>Approach:</h3>
                    <ol class="list-decimal list-inside text-slate-600 space-y-1 pl-2">
                        <li>Check Statement I alone: Can you get a unique answer?</li>
                        <li>Check Statement II alone: Can you get a unique answer?</li>
                        <li>If neither alone is sufficient, check both statements combined: Can you get a unique answer?</li>
                    </ol>
                    <p class="text-content mt-2">Key: Determine if the answer can be found uniquely, not what the answer is.</p>
                </div>
                
                <div id="topic-22" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-bolt text-teal-600"></i>22. Speed Math & Calculation Shortcuts</h2>
                    <p class="text-content mb-4">Improving calculation speed is crucial for competitive exams. Here are some common techniques:</p>

                    <h3 class="sub-heading"><i class="fas fa-superscript text-teal-500"></i>Squaring Techniques</h3>
                    <p class="text-content"><strong>1. Squaring Numbers Ending in 5:</strong></p>
                    <p class="text-content">If a number is N5 (e.g., 35), its square ends in 25. The preceding digits are N &times; (N+1).</p>
                    <div class="trick-example">
                        Example: 35<sup>2</sup>
                        <br>N = 3. N &times; (N+1) = 3 &times; 4 = 12.
                        <br>So, 35<sup>2</sup> = 1225.
                        <br>Example: 75<sup>2</sup> &rarr; 7 &times; 8 = 56 &rarr; 5625.
                    </div>

                    <p class="text-content mt-3"><strong>2. Squaring Numbers Near 50:</strong></p>
                    <p class="text-content">Base is 25. Difference from 50 is 'd'. Square = (25 &plusmn; d) | d<sup>2</sup> (d<sup>2</sup> must be 2 digits).</p>
                    <div class="trick-example">
                        Example: 48<sup>2</sup> (48 is 50 - 2, so d = 2)
                        <br>25 - d = 25 - 2 = 23.
                        <br>d<sup>2</sup> = 2<sup>2</sup> = 04.
                        <br>So, 48<sup>2</sup> = 2304.
                        <br>Example: 53<sup>2</sup> (53 is 50 + 3, so d = 3)
                        <br>25 + d = 25 + 3 = 28.
                        <br>d<sup>2</sup> = 3<sup>2</sup> = 09.
                        <br>So, 53<sup>2</sup> = 2809.
                    </div>

                    <p class="text-content mt-3"><strong>3. Squaring Numbers Near 100:</strong></p>
                    <p class="text-content">Number = (100 &plusmn; d). Square = (Number &plusmn; d) | d<sup>2</sup> (d<sup>2</sup> must be 2 digits).</p>
                    <div class="trick-example">
                        Example: 97<sup>2</sup> (97 is 100 - 3, so d = 3)
                        <br>Number - d = 97 - 3 = 94.
                        <br>d<sup>2</sup> = 3<sup>2</sup> = 09.
                        <br>So, 97<sup>2</sup> = 9409.
                        <br>Example: 104<sup>2</sup> (104 is 100 + 4, so d = 4)
                        <br>Number + d = 104 + 4 = 108.
                        <br>d<sup>2</sup> = 4<sup>2</sup> = 16.
                        <br>So, 104<sup>2</sup> = 10816.
                    </div>

                    <h3 class="sub-heading"><i class="fas fa-times text-teal-500"></i>Multiplication Shortcuts</h3>
                    <p class="text-content"><strong>1. Multiplication by 5, 25, 125:</strong></p>
                    <ul class="list-custom">
                        <li>Multiply by 5: Multiply by 10 and divide by 2 (N &times; 10 / 2). Example: 68 &times; 5 = 680 / 2 = 340.</li>
                        <li>Multiply by 25: Multiply by 100 and divide by 4 (N &times; 100 / 4). Example: 72 &times; 25 = 7200 / 4 = 1800.</li>
                        <li>Multiply by 125: Multiply by 1000 and divide by 8 (N &times; 1000 / 8). Example: 48 &times; 125 = 48000 / 8 = 6000.</li>
                    </ul>

                    <p class="text-content mt-3"><strong>2. Multiplication by 11:</strong></p>
                    <p class="text-content">Write the last digit. Then sum adjacent digits from right to left (carrying over if sum > 9). Write the first digit (add carry if any).</p>
                    <div class="trick-example">
                        Example: 345 &times; 11
                        <br>Last digit: 5.
                        <br>4 + 5 = 9.
                        <br>3 + 4 = 7.
                        <br>First digit: 3.
                        <br>So, 345 &times; 11 = 3795.
                        <br>Example: 789 &times; 11
                        <br>Last digit: 9.
                        <br>8 + 9 = 17 (write 7, carry 1).
                        <br>7 + 8 = 15. Add carry 1: 15 + 1 = 16 (write 6, carry 1).
                        <br>First digit: 7. Add carry 1: 7 + 1 = 8.
                        <br>So, 789 &times; 11 = 8679.
                    </div>
                    
                    <p class="text-content mt-3"><strong>3. Multiplication by 9, 99, 999, etc.:</strong></p>
                    <p class="text-content">Multiply by 10, 100, 1000, etc., and subtract the original number.</p>
                    <div class="trick-example">
                        Example: 67 &times; 9 = 67 &times; (10 - 1) = 670 - 67 = 603.
                        <br>Example: 123 &times; 99 = 123 &times; (100 - 1) = 12300 - 123 = 12177.
                    </div>

                    <h3 class="sub-heading"><i class="fas fa-percentage text-teal-500"></i>Quick Percentage Calculations</h3>
                     <ul class="list-custom">
                        <li>10% of N: Divide N by 10 (N / 10).</li>
                        <li>1% of N: Divide N by 100 (N / 100).</li>
                        <li>50% of N: Divide N by 2 (N / 2).</li>
                        <li>25% of N: Divide N by 4 (N / 4).</li>
                        <li>75% of N: Find 25% and multiply by 3 (3 &times; N / 4), or (50% + 25%).</li>
                        <li>Breaking down percentages: e.g., 27% of N = (25% of N) + (2% of N) or (30% of N) - (3% of N).</li>
                    </ul>
                    <div class="trick-example">
                        Example: 35% of 240
                        <br>10% of 240 = 24.
                        <br>30% of 240 = 3 &times; 24 = 72.
                        <br>5% of 240 = 10% / 2 = 24 / 2 = 12.
                        <br>So, 35% of 240 = 72 + 12 = 84.
                    </div>

                    <p class="mt-4 text-content">Remember, these shortcuts require practice to become second nature. Consistent application will significantly boost your calculation speed.</p>
                </div>

                <div id="topic-23" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-robot text-emerald-600"></i>23. AI Word Problem Assistant ✨</h2>
                    <p class="text-content mb-4">Stuck on a word problem? Paste it below and let our AI assistant help you break it down! The AI will identify key information, suggest variables and formulas, and outline a step-by-step approach to guide you towards the solution (without solving it directly).</p>
                    
                    <div class="ai-container calculator-theme-emerald">
                        <h4 class="ai-title">
                             <i class="fas fa-robot"></i>
                            Enter Your Word Problem
                        </h4>
                         <div class="calculator-description">
                            Paste your quantitative aptitude word problem below for AI assistance.
                         </div>
                        <div class="calculator-section">
                             <div class="calculator-input-group">
                                 <div class="calculator-input-wrapper">
                                     <label for="wordProblemInput" class="calculator-input-label">
                                         <i class="fas fa-pencil-alt"></i>
                                         Word Problem Text
                                     </label>
                                     <textarea id="wordProblemInput" class="w-full h-40 p-3 border border-slate-300 rounded-md mt-1 text-sm focus:ring-emerald-500 focus:border-emerald-500" placeholder="Paste your word problem here..."></textarea>
                                 </div>
                             </div>
                             <button id="getAIAnalysis" class="ai-button">
                                 <i class="fas fa-sparkles mr-2"></i>
                                 Get AI Assistance ✨
                             </button>

                             <div id="aiLoadingIndicator" class="hidden mt-4">
                                 <div class="loader"></div>
                                 <p class="text-center text-slate-600">AI is thinking... Please wait.</p>
                             </div>

                             <div id="aiAnalysisResult" class="ai-response-area hidden">

                             </div>
                         </div>
                    </div>
                </div>
                 <div id="topic-24" class="content-section">
                    <h2 class="topic-heading"><i class="fas fa-scroll text-teal-600"></i>24. Logarithms & Algebraic Identities</h2>
                    <p class="text-content mb-4">Understanding logarithms and key algebraic identities is crucial for simplifying complex expressions and solving various quantitative problems.</p>
                    
                    <h3 class="sub-heading"><i class="fas fa-calculator text-teal-500"></i>Logarithms</h3>
                    <p class="text-content">Definition: If a<sup>x</sup> = N, then <span class="formula">log<sub>a</sub> N = x</span> (where a > 0, a &ne; 1, N > 0).</p>
                    <h4 class="text-md font-semibold text-slate-700 mt-3 mb-1">Key Properties:</h4>
                    <ul class="list-custom">
                        <li>Product Rule: <span class="formula">log<sub>a</sub> (xy) = log<sub>a</sub> x + log<sub>a</sub> y</span></li>
                        <li>Quotient Rule: <span class="formula">log<sub>a</sub> (x/y) = log<sub>a</sub> x - log<sub>a</sub> y</span></li>
                        <li>Power Rule: <span class="formula">log<sub>a</sub> (x<sup>n</sup>) = n log<sub>a</sub> x</span></li>
                        <li>Base Rules: <span class="formula">log<sub>a</sub> a = 1</span>; <span class="formula">log<sub>a</sub> 1 = 0</span></li>
                        <li>Change of Base: <span class="formula">log<sub>a</sub> x = log<sub>b</sub> x / log<sub>b</sub> a</span></li>
                        <li>Reciprocal Rule: <span class="formula">log<sub>a</sub> x = 1 / log<sub>x</sub> a</span></li>
                        <li>log<sub>a</sub>(x) = y &hArr; a<sup>y</sup> = x</li>
                    </ul>

                    <h3 class="sub-heading mt-6"><i class="fas fa-equals text-teal-500"></i>Essential Algebraic Identities</h3>
                     <ul class="list-custom">
                        <li><span class="formula">(a + b)<sup>2</sup> = a<sup>2</sup> + 2ab + b<sup>2</sup></span></li>
                        <li><span class="formula">(a - b)<sup>2</sup> = a<sup>2</sup> - 2ab + b<sup>2</sup></span></li>
                        <li><span class="formula">a<sup>2</sup> - b<sup>2</sup> = (a - b)(a + b)</span></li>
                        <li><span class="formula">(a + b)<sup>3</sup> = a<sup>3</sup> + b<sup>3</sup> + 3ab(a + b)</span> or <span class="formula">a<sup>3</sup> + 3a<sup>2</sup>b + 3ab<sup>2</sup> + b<sup>3</sup></span></li>
                        <li><span class="formula">(a - b)<sup>3</sup> = a<sup>3</sup> - b<sup>3</sup> - 3ab(a - b)</span> or <span class="formula">a<sup>3</sup> - 3a<sup>2</sup>b + 3ab<sup>2</sup> - b<sup>3</sup></span></li>
                        <li><span class="formula">a<sup>3</sup> + b<sup>3</sup> = (a + b)(a<sup>2</sup> - ab + b<sup>2</sup>)</span></li>
                        <li><span class="formula">a<sup>3</sup> - b<sup>3</sup> = (a - b)(a<sup>2</sup> + ab + b<sup>2</sup>)</span></li>
                        <li><span class="formula">(a + b + c)<sup>2</sup> = a<sup>2</sup> + b<sup>2</sup> + c<sup>2</sup> + 2ab + 2bc + 2ca</span></li>
                        <li><span class="formula">a<sup>4</sup> - b<sup>4</sup> = (a<sup>2</sup> - b<sup>2</sup>)(a<sup>2</sup> + b<sup>2</sup>) = (a-b)(a+b)(a<sup>2</sup>+b<sup>2</sup>)</span></li>
                    </ul>
                </div>


            </div>
        </main>
    </div>

    <script>
        const topics = [
            { name: "Simplification and Approximation", icon: "fa-stream" },
            { name: "Number Series", icon: "fa-sort-numeric-up" },
            { name: "Quadratic Equation", icon: "fa-square-root-alt" },
            { name: "Number System / HCF & LCM", icon: "fa-hashtag" },
            { name: "Ratio and Proportion", icon: "fa-percentage" },
            { name: "Average", icon: "fa-chart-line" },
            { name: "Partnership", icon: "fa-handshake" },
            { name: "Ages", icon: "fa-user-clock" },
            { name: "Percentage", icon: "fa-percent" },
            { name: "Profit & Loss", icon: "fa-coins" },
            { name: "Time, Speed & Distance", icon: "fa-tachometer-alt" },
            { name: "Problems on Trains", icon: "fa-train" },
            { name: "Boat and Stream", icon: "fa-water" },
            { name: "Time & Work / Pipes and Cisterns", icon: "fa-clock" },
            { name: "Simple and Compound Interest", icon: "fa-money-bill-wave" },
            { name: "Mixture & Allegations", icon: "fa-flask" },
            { name: "Permutation and Combination", icon: "fa-random" },
            { name: "Probability", icon: "fa-dice" },
            { name: "Data Interpretation (DI)", icon: "fa-chart-bar" },
            { name: "Caselet DI", icon: "fa-file-alt" },
            { name: "Data Sufficiency", icon: "fa-check-double" },
            { name: "Speed Math & Calculation Shortcuts", icon: "fa-bolt" },
            { name: "AI Word Problem Assistant ✨", icon: "fa-robot" },
            { name: "Logarithms & Algebraic Identities", icon: "fa-scroll"}
        ];

        const topicListEl = document.getElementById('topicList');
        const topicContentEl = document.getElementById('topicContent');
        const defaultContentEl = document.getElementById('default-content');
        const menuButton = document.getElementById('menuButton');
        const sidebar = document.getElementById('sidebar');
        let activeLink = null;

        topics.forEach((topic, index) => {
            const listItem = document.createElement('li');
            const link = document.createElement('a');
            link.href = `#topic-${index + 1}`;
            link.innerHTML = `<i class="fas ${topic.icon} fa-fw"></i> ${index + 1}. ${topic.name.replace('✨', '<span class="text-yellow-300">✨</span>')}`;
            link.dataset.target = `topic-${index + 1}`;
            listItem.appendChild(link);
            topicListEl.appendChild(listItem);
        });

        topicListEl.addEventListener('click', function(e) {
            e.preventDefault();
            const targetAnchor = e.target.closest('a');
            if (targetAnchor && targetAnchor.dataset.target) {
                const targetId = targetAnchor.dataset.target;
                window.location.hash = targetId; 
                showContent(targetId);
                
                if(activeLink) {
                    activeLink.classList.remove('active-topic');
                }
                targetAnchor.classList.add('active-topic');
                activeLink = targetAnchor;

                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('open');
                }
            }
        });
        
        menuButton.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });

        function showContent(targetId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                targetElement.classList.add('active');
                document.getElementById('contentArea').scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            } else {
                defaultContentEl.classList.add('active'); 
            }
        }
        
        function handleHashChange() {
            const targetIdFromHash = window.location.hash.substring(1);
            if (targetIdFromHash) {
                const linkToActivate = topicListEl.querySelector(`a[data-target="${targetIdFromHash}"]`);
                if (linkToActivate) {
                    showContent(targetIdFromHash);
                    if(activeLink) activeLink.classList.remove('active-topic');
                    linkToActivate.classList.add('active-topic');
                    activeLink = linkToActivate;
                } else {
                    showContent('default-content');
                     if(activeLink) activeLink.classList.remove('active-topic');
                }
            } else {
                showContent('default-content');
                if(activeLink) activeLink.classList.remove('active-topic');
            }
        }

        window.addEventListener('hashchange', handleHashChange);
        document.addEventListener('DOMContentLoaded', handleHashChange);


        document.querySelectorAll('.calculator-container, .ai-container').forEach(container => {
            container.addEventListener('mouseenter', () => {});
            container.addEventListener('mouseleave', () => {});
        });

        function gcd(a, b) {
            a = Math.abs(a); b = Math.abs(b);
            if (b === 0) return a;
            return gcd(b, a % b);
        }

        function lcm(a, b) {
            a = Math.abs(a); b = Math.abs(b);
            if (a === 0 || b === 0) return 0;
            const hcf = gcd(a,b);
            return hcf === 0 ? 0 : (a * b) / hcf;
        }

        function factorial(n) {
            if (n < 0) return NaN; 
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }
        
        function displayError(resultEl, message) {
            resultEl.innerHTML = `
                <div class="flex items-center gap-3">
                    <i class="fas fa-exclamation-circle text-red-500"></i>
                    <span class="font-medium text-red-700">${message}</span>
                </div>`;
            resultEl.classList.add('error');
            resultEl.classList.remove('success', 'hidden');
        }

        function displaySuccess(resultEl, message) {
            resultEl.innerHTML = `
                <div class="flex items-start gap-3">
                     <i class="fas fa-check-circle text-teal-600 mt-1"></i>
                    <div class="font-medium text-teal-800">${message}</div>
                </div>`;
            resultEl.classList.add('success');
            resultEl.classList.remove('error', 'hidden');
        }
        
        function formatAIResponse(text) {
            let html = text;
            html = html.replace(/\*\*(.*?)\*\*/g, (match, p1) => `<h3 class="text-lg font-semibold text-emerald-700 mt-4 mb-2">${p1}</h3>`);
            html = html.replace(/\*(.*?)\*/g, (match, p1) => `<em>${p1}</em>`);
            html = html.replace(/^\s*(\d+)\.\s+(.*)/gm, (match, p1, p2) => `<li class="ml-4">${p1}. ${p2.trim()}</li>`);
            html = html.replace(/^\s*[\*\-]\s+(.*)/gm, (match, p1) => `<li class="ml-4">${p1.trim()}</li>`);
            html = html.replace(/(\<\/li\>\s*)+/g, '</li>'); 
            html = html.replace(/(<li>.*?<\/li>\s*)+/g, (match) => {
                 if (match.match(/<li class="ml-4">\d+\./)) {
                    return `<ol class="list-decimal list-inside space-y-1 text-slate-700">${match}</ol>`;
                }
                return `<ul class="list-disc list-inside space-y-1 text-slate-700">${match}</ul>`;
            });
            html = html.replace(/\n\n/g, '<br><br>');
            html = html.replace(/\n/g, '<br>');
            return html;
        }

        const solveQuadraticBtn = document.getElementById('solveQuadratic');
        if (solveQuadraticBtn) {
            solveQuadraticBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('quadraticResult');
                resultEl.innerHTML = ''; 
                const a = parseFloat(document.getElementById('coeffA').value);
                const b = parseFloat(document.getElementById('coeffB').value);
                const c = parseFloat(document.getElementById('coeffC').value);
                
                if (isNaN(a) || isNaN(b) || isNaN(c)) {
                    displayError(resultEl, "Please enter valid numbers for all coefficients.");
                    return;
                }
                if (a === 0) {
                    displayError(resultEl, "Coefficient 'a' cannot be zero for a quadratic equation.");
                    return;
                }
                
                const D = b*b - 4*a*c;
                let nature = "", rootsText = "";
                
                if (D > 0) {
                    const r1 = (-b + Math.sqrt(D)) / (2*a);
                    const r2 = (-b - Math.sqrt(D)) / (2*a);
                    nature = Number.isInteger(Math.sqrt(D)) ? "Real, distinct, rational" : "Real, distinct, irrational";
                    rootsText = `x₁ = ${r1.toFixed(4)}, x₂ = ${r2.toFixed(4)}`;
                } else if (D === 0) {
                    const r = -b / (2*a);
                    nature = "Real, equal, rational";
                    rootsText = `x = ${r.toFixed(4)}`;
                } else {
                    const rp = (-b / (2*a)).toFixed(4);
                    const ip = (Math.sqrt(-D) / (2*a)).toFixed(4);
                    nature = "Imaginary (complex conjugate)";
                    rootsText = `x₁ = ${rp} + ${ip}i, x₂ = ${rp} - ${ip}i`;
                }
                displaySuccess(resultEl, `<strong>Discriminant (D):</strong> ${D.toFixed(4)}<br><strong>Nature:</strong> ${nature} roots<br><strong>Roots:</strong> ${rootsText}`);
            });
        }

        const calculateHcfLcmBtn = document.getElementById('calculateHcfLcm');
        if (calculateHcfLcmBtn) {
            calculateHcfLcmBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('hcfLcmResult');
                resultEl.innerHTML = ''; 
                const num1 = parseInt(document.getElementById('num1HcfLcm').value);
                const num2 = parseInt(document.getElementById('num2HcfLcm').value);
                if (isNaN(num1) || isNaN(num2) || num1 <= 0 || num2 <= 0) { displayError(resultEl, "Please enter valid positive integers."); return; }
                const hcfVal = gcd(num1, num2);
                const lcmVal = lcm(num1, num2);
                displaySuccess(resultEl, `<strong>HCF(${num1}, ${num2}):</strong> ${hcfVal}<br><strong>LCM(${num1}, ${num2}):</strong> ${lcmVal}`);
            });
        }
        
        const calculateFourthProportionalBtn = document.getElementById('calculateFourthProportional');
        if(calculateFourthProportionalBtn) {
            calculateFourthProportionalBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('fourthProportionalResult');
                resultEl.innerHTML = '';
                const a = parseFloat(document.getElementById('ratioA').value);
                const b = parseFloat(document.getElementById('ratioB').value);
                const c = parseFloat(document.getElementById('ratioC').value);
                if (isNaN(a) || isNaN(b) || isNaN(c) || a === 0) { displayError(resultEl, "Please enter valid numbers (a cannot be zero)."); return; }
                const x = (b * c) / a;
                displaySuccess(resultEl, `The fourth proportional (X) is: ${x.toFixed(4)}`);
            });
        }

        const calculateAverageBtn = document.getElementById('calculateAverage');
        if (calculateAverageBtn) {
            calculateAverageBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('averageResult');
                resultEl.innerHTML = '';
                const numsStr = document.getElementById('avgNumbers').value;
                if (numsStr.trim() === "") { displayError(resultEl, "Please enter some numbers."); return; }
                const numsArr = numsStr.split(',').map(n => parseFloat(n.trim()));
                if (numsArr.some(isNaN)) { displayError(resultEl, "Please enter valid comma-separated numbers."); return; }
                const sum = numsArr.reduce((acc, curr) => acc + curr, 0);
                displaySuccess(resultEl, `Average: ${(sum / numsArr.length).toFixed(4)}`);
            });
        }

        const calculatePartnershipBtn = document.getElementById('calculatePartnership');
        if(calculatePartnershipBtn){
            calculatePartnershipBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('partnershipResult');
                resultEl.innerHTML = '';
                const invA = parseFloat(document.getElementById('investA').value);
                const invB = parseFloat(document.getElementById('investB').value);
                const profit = parseFloat(document.getElementById('totalProfit').value);
                if (isNaN(invA) || isNaN(invB) || isNaN(profit) || invA < 0 || invB < 0 || profit < 0) { displayError(resultEl, "Enter valid positive investments and profit."); return; }
                if(invA + invB === 0 && profit !== 0) { displayError(resultEl, "Total investment cannot be zero if there is profit."); return; }
                if(invA + invB === 0 && profit === 0) { displaySuccess(resultEl, "No investment and no profit. Shares are 0."); return; }
                const shareA = (invA / (invA + invB)) * profit;
                const shareB = (invB / (invA + invB)) * profit;
                displaySuccess(resultEl, `Partner A's Share: ${shareA.toFixed(2)}<br>Partner B's Share: ${shareB.toFixed(2)}`);
            });
        }

        const calculatePercentageBtn = document.getElementById('calculatePercentage');
        if (calculatePercentageBtn) {
            calculatePercentageBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('percentageResult');
                resultEl.innerHTML = '';
                const percent = parseFloat(document.getElementById('percentVal').value);
                const base = parseFloat(document.getElementById('baseVal').value);
                if (isNaN(percent) || isNaN(base)) { displayError(resultEl, "Enter valid numbers for percentage and base."); return; }
                displaySuccess(resultEl, `${percent}% of ${base} is: ${((percent / 100) * base).toFixed(4)}`);
            });
        }
        
        const calculateProfitLossBtn = document.getElementById('calculateProfitLoss');
        if(calculateProfitLossBtn) {
            calculateProfitLossBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('profitLossResult');
                resultEl.innerHTML = '';
                const cp = parseFloat(document.getElementById('costPrice').value);
                const sp = parseFloat(document.getElementById('sellingPrice').value);
                if (isNaN(cp) || isNaN(sp) || cp < 0 || sp < 0) { displayError(resultEl, "Enter valid positive CP and SP."); return; }
                let resText = "";
                if (sp > cp) {
                    const p = sp - cp; resText = `Profit: ${p.toFixed(2)}, Profit %: ${((p / cp) * 100).toFixed(2)}%`;
                } else if (cp > sp) {
                    const l = cp - sp; resText = `Loss: ${l.toFixed(2)}, Loss %: ${((l / cp) * 100).toFixed(2)}%`;
                } else { resText = "No Profit, No Loss."; }
                displaySuccess(resultEl, resText);
            });
        }

        const calculateTSDBtn = document.getElementById('calculateTSD');
        if(calculateTSDBtn){
            calculateTSDBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('tsdResult');
                resultEl.innerHTML = '';
                const d = document.getElementById('tsdDistance').value;
                const s = document.getElementById('tsdSpeed').value;
                const t = document.getElementById('tsdTime').value;
                const dVal = parseFloat(d), sVal = parseFloat(s), tVal = parseFloat(t);

                let solveCount = (d === '' ? 1:0) + (s === '' ? 1:0) + (t === '' ? 1:0);
                if(solveCount !== 1){ displayError(resultEl, "Please leave exactly one field blank to solve."); return; }

                if(d === ''){ 
                    if(isNaN(sVal) || isNaN(tVal) || sVal < 0 || tVal < 0) { displayError(resultEl, "Enter valid non-negative Speed & Time."); return; }
                    displaySuccess(resultEl, `Distance = ${ (sVal * tVal).toFixed(4) }`);
                } else if (s === '') { 
                    if(isNaN(dVal) || isNaN(tVal) || dVal < 0 || tVal <= 0) { displayError(resultEl, "Enter valid non-negative Distance & positive Time."); return; }
                    displaySuccess(resultEl, `Speed = ${ (dVal / tVal).toFixed(4) }`);
                } else { 
                    if(isNaN(dVal) || isNaN(sVal) || dVal < 0 || sVal <= 0) { displayError(resultEl, "Enter valid non-negative Distance & positive Speed."); return; }
                    displaySuccess(resultEl, `Time = ${ (dVal / sVal).toFixed(4) }`);
                }
            });
        }

        const calculateBoatStreamBtn = document.getElementById('calculateBoatStream');
        if(calculateBoatStreamBtn){
            calculateBoatStreamBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('boatStreamResult');
                resultEl.innerHTML = '';
                const b = parseFloat(document.getElementById('boatSpeed').value);
                const s = parseFloat(document.getElementById('streamSpeed').value);
                if(isNaN(b) || isNaN(s) || b < 0 || s < 0) { displayError(resultEl, "Enter valid positive speeds for boat and stream."); return; }
                if(b < s && (b+s !==0) ) { displayError(resultEl, "Boat speed must be >= stream speed for upstream travel."); return;}
                displaySuccess(resultEl, `Downstream Speed (D = B+S): ${(b+s).toFixed(4)}<br>Upstream Speed (U = B-S): ${(b-s).toFixed(4)}`);
            });
        }
        
        const calculateCombinedWorkBtn = document.getElementById('calculateCombinedWork');
        if(calculateCombinedWorkBtn){
            calculateCombinedWorkBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('combinedWorkResult');
                resultEl.innerHTML = '';
                const tA = parseFloat(document.getElementById('timeA').value);
                const tB = parseFloat(document.getElementById('timeB').value);
                if(isNaN(tA) || isNaN(tB) || tA <= 0 || tB <= 0) { displayError(resultEl, "Enter valid positive times for A and B."); return; }
                displaySuccess(resultEl, `Combined Time: ${((tA * tB) / (tA + tB)).toFixed(4)} days`);
            });
        }

        const calculateInterestBtn = document.getElementById('calculateInterest');
        if (calculateInterestBtn) {
            calculateInterestBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('interestResult');
                resultEl.innerHTML = '';
                const p = parseFloat(document.getElementById('principal').value);
                const r = parseFloat(document.getElementById('rate').value);
                const t = parseFloat(document.getElementById('time').value);
                if (isNaN(p) || isNaN(r) || isNaN(t) || p <=0 || r < 0 || t <= 0) { displayError(resultEl, "Enter valid P>0, R>=0, T>0."); return; }
                const si = (p * r * t) / 100;
                const amtSI = p + si;
                const amtCI = p * Math.pow((1 + r/100), t);
                const ci = amtCI - p;
                displaySuccess(resultEl, `<strong>Simple Interest (SI):</strong> ${si.toFixed(2)} | <strong>Amount (SI):</strong> ${amtSI.toFixed(2)}<br>
                                      <strong>Compound Interest (CI, annual):</strong> ${ci.toFixed(2)} | <strong>Amount (CI):</strong> ${amtCI.toFixed(2)}`);
            });
        }

        const calculatePnCBtn = document.getElementById('calculatePnC');
        if(calculatePnCBtn){
            calculatePnCBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('pncResult');
                resultEl.innerHTML = '';
                const n = parseInt(document.getElementById('pncN').value);
                const r = parseInt(document.getElementById('pncR').value);
                if(isNaN(n) || isNaN(r) || n < 0 || r < 0 || r > n) { displayError(resultEl, "Enter valid integers where n >= r >= 0."); return; }
                const npr = factorial(n) / factorial(n-r);
                const ncr = npr / factorial(r);
                displaySuccess(resultEl, `<sup>${n}</sup>P<sub>${r}</sub> = ${npr.toLocaleString()}<br><sup>${n}</sup>C<sub>${r}</sub> = ${ncr.toLocaleString()}`);
            });
        }

        const calculateProbabilityBtn = document.getElementById('calculateProbability');
        if(calculateProbabilityBtn){
            calculateProbabilityBtn.addEventListener('click', () => {
                const resultEl = document.getElementById('probabilityResult');
                resultEl.innerHTML = '';
                const fav = parseInt(document.getElementById('favorableOutcomes').value);
                const total = parseInt(document.getElementById('totalOutcomes').value);
                if(isNaN(fav) || isNaN(total) || fav < 0 || total <= 0 || fav > total) { displayError(resultEl, "Enter valid integers (0 <= Favorable <= Total, Total > 0)."); return; }
                displaySuccess(resultEl, `P(E) = ${fav}/${total} = ${(fav/total).toFixed(4)}`);
            });
        }

        // AI Word Problem Assistant
        const getAIAnalysisBtn = document.getElementById('getAIAnalysis');
        const wordProblemInputEl = document.getElementById('wordProblemInput');
        const aiLoadingIndicatorEl = document.getElementById('aiLoadingIndicator');
        const aiAnalysisResultEl = document.getElementById('aiAnalysisResult');

        if (getAIAnalysisBtn) {
            getAIAnalysisBtn.addEventListener('click', async () => {
                const problemText = wordProblemInputEl.value.trim();
                if (!problemText) {
                    displayError(aiAnalysisResultEl, "Please enter a word problem.");
                    return;
                }

                aiLoadingIndicatorEl.classList.remove('hidden');
                aiAnalysisResultEl.classList.add('hidden');
                aiAnalysisResultEl.innerHTML = ''; 

                const prompt = `You are an expert quantitative aptitude assistant. A user has provided the following word problem. Your task is to help them understand how to approach it. Do not solve the problem directly, but provide a structured breakdown.

Word Problem:
\`\`\`
${problemText}
\`\`\`

Please provide your analysis in the following format, using Markdown-style headings for each section (e.g., "**1. Core Question:**"):

**1. Core Question:**
(What is the main thing the problem asks you to find?)

**2. Key Information & Values:**
(List all important numbers, units, and facts given in the problem. Use bullet points for lists if appropriate.)

**3. Suggested Variables:**
(Suggest variables for any unknown quantities, e.g., Let x be...)

**4. Relevant Formulas/Concepts:**
(List mathematical formulas or concepts that are likely to be useful for solving this problem. Refer to common quantitative aptitude topics. Use bullet points.)

**5. Step-by-Step Approach Outline:**
(Provide a high-level outline of steps the user could take to solve the problem. Do not perform the actual calculations. Use a numbered list.)

Ensure your language is clear, encouraging, and helpful for someone preparing for an exam.`;
                
                try {
                    const apiKey = "YOUR_API_KEY_HERE"; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const payload = {
                        contents: [{ role: "user", parts: [{ text: prompt }] }]
                    };

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error("API Error Data:", errorData); 
                        let errorMessage = `API request failed with status ${response.status}.`;
                        if (errorData.error && errorData.error.message) {
                            errorMessage += ` Message: ${errorData.error.message}`;
                        }
                        if (errorData.error?.message?.includes("API Key not valid") || errorData.error?.message?.includes("API_KEY_INVALID")) {
                            errorMessage = "The API Key is not valid. Please ensure 'YOUR_API_KEY_HERE' in the script is replaced with your actual key from Google AI Studio.";
                        } else if (errorData.error?.message?.includes("API_KEY_SERVICE_BLOCKED") || errorData.error?.message?.includes("API key not valid")) {
                             errorMessage = "This API key is not authorized or may be disabled. Check your Google Cloud Project settings for the Gemini API.";
                        } else if (errorData.error?.message?.includes("caller does not have permission")) {
                            errorMessage = "The API key is missing required permissions for the Gemini API. Please check IAM settings in your Google Cloud Project.";
                        } else if (response.status === 400 && errorData.error?.message?.toLowerCase().includes("api key")) {
                             errorMessage = "API Key is likely missing or invalid. Please replace 'YOUR_API_KEY_HERE' in the script with your actual Gemini API key from Google AI Studio.";
                        }


                        throw new Error(errorMessage);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const aiText = result.candidates[0].content.parts[0].text;
                        aiAnalysisResultEl.innerHTML = formatAIResponse(aiText);
                    } else if (result.promptFeedback && result.promptFeedback.blockReason) {
                        let blockMessage = `The AI could not process your request. Reason: ${result.promptFeedback.blockReason}.`;
                        if (result.promptFeedback.safetyRatings) {
                            blockMessage += ` Details: ${result.promptFeedback.safetyRatings.map(r => `${r.category} - ${r.probability}`).join(', ')}`;
                        }
                        throw new Error(blockMessage);
                    }
                    else {
                        throw new Error("Received an unexpected response structure from the AI.");
                    }

                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    displayError(aiAnalysisResultEl, `Error: Could not get AI assistance. ${error.message}`);
                } finally {
                    aiLoadingIndicatorEl.classList.add('hidden');
                    aiAnalysisResultEl.classList.remove('hidden');
                }
            });
        }

    </script>
</body>
</html>
